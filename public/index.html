<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avianca - Find cheap tickets and flights</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="shortcut icon" href="./assets/favicon.svg" t  ype="image/x-icon">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/calendar.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/normalize.css">
    <link rel="stylesheet" href="./css/styles.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/10.1.0/jsrsasign-all-min.js"></script>

    <!-- START -->
    <script src="./js/functions.js"></script>

    <!-- ===========================
         DESKTOP: buscador compacto
         (NO toca móvil)
         =========================== -->
    <style id="desktop-search-patch">
    @media (min-width:1024px){

      /* Radios “Ida y vuelta / Solo ida” a la izquierda */
      .main--card--header{
        justify-content:flex-start !important;
        padding:8px 20px 0 !important;
      }
      .main--card--header form{ margin:0 !important; }

      /* Tarjeta contenedora (ancho, sombras) */
      .sp-initial-content .main--card{
        max-width:1240px;
        margin:0 auto;
        border-radius:18px;
        box-shadow:0 10px 28px rgba(0,0,0,.06);
      }

      /* Fila única:  Origen/Destino | (Ida,Vuelta) | Pasajeros | Buscar */
      .main--card--body{
        display:grid !important;
        grid-template-columns: minmax(520px,2fr) 1.2fr .9fr auto;
        gap:14px;
        align-items:center;
        background:#fff;
        border-radius:16px;
        padding:16px 18px 20px !important;
      }

      /* Apariencia homogénea para todos los “inputs” tipo botón */
      .main--card--body .btn-ig{
        display:flex; align-items:center; gap:10px;
        height:56px; width:100%;
        background:#fff;
        border:1px solid #e7e7e7 !important;
        border-radius:12px;
        padding:0 14px;
        border-bottom:0 !important; /* anula la línea verde del modo móvil */
      }
      .main--card--body .btn-ig .btn-ig-icon{
        position:static !important; width:18px; height:18px; opacity:.9;
      }
      .main--card--body .btn-ig .btn-ig-label{
        position:static !important; font-size:12px; font-weight:600; color:#777;
      }
      .main--card--body .btn-ig .btn-ig-text{
        margin-left:auto; font-weight:800; font-size:14px;
      }

      /* ---- Columna 1: Origen/Destino en una sola “píldora” ---- */
      #main-destinations-selector{ grid-column:1; }
      #main-destinations-selector .main--input-group{
        display:grid;
        grid-template-columns:1fr 36px 1fr;  /* Origen | ↔ | Destino */
        gap:10px; align-items:center;
        height:56px; padding:6px 8px;
        background:#fff; border:1px solid #e7e7e7; border-radius:12px;
        box-shadow:none;
      }
      #main-destinations-selector .fd-icon{
        width:22px; height:22px; opacity:.8;
        justify-self:center; position:static !important; margin:0;
      }
      #main-destinations-selector .btn-ig{
        height:44px; border:0 !important; background:transparent; padding:0 10px 0 38px;
      }
      #main-destinations-selector .btn-ig-icon{
        position:absolute; left:12px; top:50%; transform:translateY(-50%);
        width:18px; height:18px; opacity:.9;
      }
      #main-destinations-selector .btn-ig-label{
        font-size:11px; color:#8a8a8a; margin-right:8px;
      }
      #main-destinations-selector .btn-ig-text{
        font-size:14px; font-weight:800;
      }

      /* ---- Columna 2: Fechas (Ida | Vuelta) juntas ---- */
      .main--card--body > .main--input-group:nth-of-type(1){
        grid-column:2;
        display:grid; grid-template-columns:1fr 1fr; gap:14px;
        border:0 !important;     /* oculta borde del wrapper original */
      }
      /* Respetar “Solo ida” cuando tu JS oculta la vuelta */
      #btn-date-back.d-none{ display:none !important; }

      /* ---- Columna 3: Pasajeros ---- */
      .main--card--body > .main--input-group:nth-of-type(2){
        grid-column:3; border:0 !important;
      }
      #btn-passengers{ padding:0 14px 0 44px !important; }
      #btn-passengers .btn-ig-icon{ position:absolute; left:14px; }

      /* ---- Columna 4: Botón Buscar (derecha, mismo alto) ---- */
      #search-flight{
        grid-column:4;
        min-width:170px;
        height:56px !important;
        border-radius:12px !important;
        white-space:nowrap;
        box-shadow:0 6px 14px rgba(0,0,0,.08);
        justify-self:end; /* pega a la derecha */
      }
      /* estética del botón negro */
      .btn.btn-black{
        height:56px; padding:0 26px; border:none; border-radius:12px;
      }

      /* Un poco menos de aire en el header azul */
      .bg-main-card{ padding-top:8px !important; }
    }
    </style>
</head>
<body class="sb-hidden">

    <!-- ON LOADER -->
    <div class="loader show">
        <img class="" src="./assets/svg/plane-loader.gif" alt="Loading">
    </div>

    <!-- ON CONVERS | DESTINATIONS (esto sí se usa para buscar ciudades) -->
    <div class="cover" id="cover-destinations">
        <div class="cover--main">
            <div class="cover--header">
                <a id="close-modal"><img src="./assets/svg/left_arrow.png" class="" alt="Back"></a>
                <h2 id="search-label">Origen</h2>
                <a id="close-modal"><img src="./assets/svg/x_icon.png" alt="Close"></a>
            </div>

            <div class="cover--body">
                <div class="search--input--container">
                    <input type="text" class="search--input">
                    <img class="search--input--icon" src="./assets/svg/takeoff_icon.png" alt="">
                    <span id="search-input-label" class="search--input--label">Origen</span>
                </div>
                <div id="destinations"></div>
            </div>
        </div>
    </div>

    <!-- ⚠️ Restaurado solo para compatibilidad con index.js (oculto siempre) -->
    <div class="cover" id="cover-resume" style="display:none;">
        <div class="cover--main">
            <div class="cover--header">
                <a id="close-modal"><img src="./assets/svg/left_arrow.png" class="" alt="Back"></a>
                <h2 id="search-label">Reserva tu vuelo</h2>
                <a id="close-modal"><img src="./assets/svg/x_icon.png" alt="Close"></a>
            </div>
            <div class="cover--body">
                <div class="main--card--header" id="resume-type-selector"></div>
                <div class="mt-3" id="resume-destinations-selector"></div>
                <!-- Botón real que algunos scripts esperan -->
                <button id="btn-next-step" class="btn btn-black mt-3 w-100" style="display:none">Buscar</button>
            </div>
        </div>
    </div>

    <!-- NAVBAR -->
    <nav class="navbar">
        <img class="navbar-hmenu" src="./assets/svg/hamburger_menu.png" alt="menu_h">
        <div class="navbar--logo">
            <img src="./assets/logos/avianca_full.svg" alt="logo">
        </div>
    </nav>

    <section class="main">
        <div class="sp-initial-content bg-main-card">
            <div class="main--card">
                <div id="main-type-selector" class="main--card--header">
                    <form id="type-selector">
                        <label class="radio-wrapper" for="ida_vuelta">
                            <input type="radio" selected id="ida_vuelta" name="opcion_viaje" onclick="info.flightInfo.type = 1; updateLS(); updateDOM()">
                            <div class="radio-circle">
                                <div class="radio-dot"></div>
                            </div>
                            <span class="radio-label">Ida y vuelta</span>
                        </label>

                        <label class="radio-wrapper" for="solo_ida">
                            <input type="radio" id="solo_ida" name="opcion_viaje" onclick="info.flightInfo.type = 2; updateLS(); updateDOM()">
                            <div class="radio-circle">
                                <div class="radio-dot"></div>
                            </div>
                            <span class="radio-label">Solo ida</span>
                        </label>
                    </form>
                </div>

                <div class="main--card--body">
                    <!-- Origen / Destino -->
                    <div id="main-destinations-selector">
                        <div class="main--input-group" id="destinations-selector">
                            <button class="btn-ig" id="btn-origin">
                                <img class="btn-ig-icon" src="./assets/svg/takeoff_icon.png" alt="">
                                <span class="btn-ig-label">Origen</span>
                                <span class="btn-ig-text" id="btn-origin-label">Bogotá</span>
                            </button>

                            <img class="fd-icon" src="./assets/svg/flight-direction-icon.png" alt="↔">

                            <button class="btn-ig" id="btn-destination">
                                <img class="btn-ig-icon" src="./assets/svg/landing_icon.png" alt="">
                                <span class="btn-ig-label">Destino</span>
                                <span class="btn-ig-text" id="btn-destination-label">Cali</span>
                            </button>
                        </div>
                    </div>

                    <!-- Fechas (inline) -->
                    <div class="main--input-group mt-3">
                        <input class="d-none" type="date" id="date-go" readonly onclick="calender(this, 'go')">
                        <button class="btn-ig" id="btn-date-go" onclick="document.querySelector('#date-go').click();">
                            <img class="btn-ig-icon" src="./assets/svg/date-icon.png" alt="">
                            <span class="btn-ig-label">Ida</span>
                            <span class="btn-ig-text" id="btn-date-go-label">01/01/2001</span>
                        </button>

                        <input class="d-none" type="date" id="date-back" readonly onclick="calender(this, 'back')">
                        <button class="btn-ig" id="btn-date-back" onclick="document.querySelector('#date-back').click()">
                            <img class="btn-ig-icon" src="./assets/svg/date-icon.png" alt="">
                            <span class="btn-ig-label">Vuelta</span>
                            <span class="btn-ig-text" id="btn-date-back-label">01/01/2001</span>
                        </button>
                    </div>

                    <!-- Pasajeros (inline con popover) -->
                    <div class="main--input-group mt-3" style="position:relative;">
                        <button class="btn-ig" id="btn-passengers" type="button">
                            <img class="btn-ig-icon" src="./assets/svg/add-passenger-icon.png" alt="">
                            <span class="btn-ig-label">Pasajeros</span>
                            <span class="btn-ig-text" id="btn-passengers-label">1</span>
                        </button>

                        <!-- Popover simple -->
                        <div id="pp-passengers" class="d-none" style="position:absolute; left:0; right:0; top:100%; background:#fff; border:1px solid #d9d9d9; border-radius:12px; padding:14px; margin-top:6px; z-index:50;">
                            <div class="passenger-selector">
                                <div>
                                    <p class="text-normal">Adultos</p>
                                    <p class="text-thin">Desde 12 años</p>
                                </div>
                                <div class="passenger-btn">
                                    <img src="./assets/svg/remove-icon.png" style="height: 23px; cursor:pointer;" onclick="rmP('adult');" alt="menos">
                                    <h1 id="adults-label">1</h1>
                                    <img src="./assets/svg/add-icon.png" style="cursor:pointer;" onclick="addP('adult');" alt="más">
                                </div>
                            </div>

                            <div class="passenger-selector mt-2">
                                <div>
                                    <p class="text-normal">Niños</p>
                                    <p class="text-thin">De 2 a 11 años</p>
                                </div>
                                <div class="passenger-btn">
                                    <img src="./assets/svg/remove-icon.png" style="height: 23px; cursor:pointer;" onclick="rmP('child');" alt="menos">
                                    <h1 id="children-label">0</h1>
                                    <img src="./assets/svg/add-icon.png" style="cursor:pointer;" onclick="addP('child');" alt="más">
                                </div>
                            </div>

                            <div class="passenger-selector mt-2">
                                <div>
                                    <p class="text-normal">Bebés</p>
                                    <p class="text-thin">Menores de 2 años</p>
                                </div>
                                <div class="passenger-btn">
                                    <img src="./assets/svg/remove-icon.png" style="height: 23px; cursor:pointer;" onclick="rmP('baby');" alt="menos">
                                    <h1 id="babies-label">0</h1>
                                    <img src="./assets/svg/add-icon.png" style="cursor:pointer;" onclick="addP('baby');" alt="más">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button id="search-flight" class="btn btn-black mt-3">
                        Buscar
                    </button>
                </div>
            </div>
        </div>

        <!-- PROMO SPLIT -->
        <div class="promo-split">
          <div class="promo-split__img" style="background-image:url('./assets/svg/main_banner_people.png')">
            <span class="promo-badge">Lm+&nbsp;&nbsp;Acumula millas</span>
          </div>

          <div class="promo-split__panel">
            <div class="promo-split__panel-top">
              <div>
                <p class="promo-kicker">Lujos de</p>
                <h2 class="promo-title">temporada baja</h2>
              </div>
              <img class="promo-logo" src="./assets/logos/avianca_negative.svg" alt="Avianca">
            </div>

            <p class="promo-copy">
              Viaja por menos y disfruta más. Reserva ya y vuela en septiembre de 2025.
            </p>

            <div class="promo-split__price-cta">
              <p class="promo-price">Por trayecto desde <span class="price-xxl">USD 60</span></p>
              <button class="btn btn-light">Ver ofertas</button>
            </div>
          </div>
        </div>
    </section>

    <!-- OFERTAS (NUEVO LAYOUT) -->
    <section class="cards--container">
      <h3 class="offers-title">
        Ofertas desde
        <a class="link-blue" target="_blank" href="">
          Quito <img width="15" src="./assets/svg/down_blue_arrow.png" alt="">
        </a>
      </h3>

      <div class="offers-grid">
        <!-- Guayaquil -->
        <a href="#" class="offer-card card--bg--gua" aria-label="Guayaquil desde USD 64">
          <div class="offer-pill">
            <div class="offer-city">Guayaquil</div>
            <div class="offer-right">
              <span class="offer-badge">Lm+&nbsp;Acumula millas</span>
              <div class="offer-price">
                <small>Por trayecto desde</small>
                <strong>USD 64</strong>
              </div>
            </div>
          </div>
        </a>

        <!-- Manta -->
        <a href="#" class="offer-card card--bg--glp" aria-label="Manta desde USD 69">
          <div class="offer-pill">
            <div class="offer-city">Manta</div>
            <div class="offer-right">
              <span class="offer-badge">Lm+&nbsp;Acumula millas</span>
              <div class="offer-price">
                <small>Por trayecto desde</small>
                <strong>USD 69</strong>
              </div>
            </div>
          </div>
        </a>

        <!-- Cuenca -->
        <a href="#" class="offer-card card--bg--cue" aria-label="Cuenca desde USD 79">
          <div class="offer-pill">
            <div class="offer-city">Cuenca</div>
            <div class="offer-right">
              <span class="offer-badge">Lm+&nbsp;Acumula millas</span>
              <div class="offer-price">
                <small>Por trayecto desde</small>
                <strong>USD 79</strong>
              </div>
            </div>
          </div>
        </a>
      </div>
    </section>

    <!-- FOOTER (tu versión nueva elegante) -->
    <footer class="site-footer">
      <div class="sf__inner">

        <div class="sf__top">
          <div class="sf__brand">
            <img src="./assets/logos/avianca_negative.svg" alt="Avianca" class="sf__logo">
          </div>

          <div class="sf__newsletter" aria-label="Suscripción a ofertas">
            <p class="sf__title">¿Estás buscando ofertas?</p>
            <p class="sf__subtitle">Suscríbete y sé el primero en recibir ofertas personalizadas en tu correo.</p>

            <form class="sf__form" action="#" method="post" onsubmit="return false;">
              <input class="sf__input -i-mail" type="email" placeholder="correo@email.com" required>
              <button class="btn btn-red sf__btn" type="submit">Suscríbete</button>
            </form>

            <p class="sf__legal text-thin">
              Al suscribirme acepto la <a href="#" class="sf__link">Política de Privacidad</a> y el uso de mis datos personales para recibir ofertas.
            </p>
          </div>

          <div class="sf__social">
            <p class="sf__title sf__title--social">¡Síguenos!</p>
            <img class="sf__social-sprite" width="200" src="./assets/svg/social_media_icons.png" alt="Social">
          </div>
        </div>

        <div class="sf__cols">
          <div class="sf__col">
            <h4 class="sf__col-title">Descubre y compra</h4>
            <ul class="sf__list">
              <li><a href="#">Vuelos baratos</a></li>
              <li><a href="#">Reservas de hoteles</a></li>
              <li><a href="#">Alquiler de autos</a></li>
              <li><a href="#">Tours y excursiones</a></li>
              <li><a href="#">Asistencia en viaje</a></li>
              <li><a href="#">avianca connect</a></li>
            </ul>
          </div>

          <div class="sf__col">
            <h4 class="sf__col-title">Sobre nosotros</h4>
            <ul class="sf__list">
              <li><a href="#">Somos avianca</a></li>
              <li><a href="#">Trabaja con nosotros</a></li>
              <li><a href="#">Noticias corporativas</a></li>
              <li><a href="#">Alianzas y beneficios</a></li>
              <li><a href="#">Sostenibilidad</a></li>
              <li><a href="#">Plan de accesibilidad</a></li>
            </ul>
          </div>

          <div class="sf__col">
            <h4 class="sf__col-title">Nuestros portales</h4>
            <ul class="sf__list">
              <li><a href="#">Programa Lifemiles</a></li>
              <li><a href="#">avianca empresas</a></li>
              <li><a href="#">aviancadirect</a></li>
              <li><a href="#">avianca trade</a></li>
              <li><a href="#">avianca cargo</a></li>
              <li><a href="#">Relación con inversionistas</a></li>
            </ul>
          </div>

          <div class="sf__col">
            <h4 class="sf__col-title">Enlaces rápidos</h4>
            <ul class="sf__list">
              <li><a href="#">Información legal</a></li>
              <li><a href="#">Política de privacidad</a></li>
              <li><a href="#">Contrato de transporte</a></li>
              <li><a href="#">Artículos restringidos</a></li>
              <li><a href="#">Plan de contingencia</a></li>
              <li><a href="#">Contáctanos</a></li>
            </ul>
          </div>
        </div>

        <hr class="sf__hr">

        <div class="sf__bottom">
          <p>Copyright © Avianca 2025</p>
          <img src="./assets/svg/Powered_by.png" width="130" alt="Powered by">
        </div>
      </div>
    </footer>

    <!-- SCRIPTS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="./js/calendar.js"></script>
    <script src="./js/index.js"></script>

    <!-- Lógica: popover pasajeros + sincronizar y disparar búsqueda real SIN abrir modal -->
    <script>
    (function () {
      // --- POPUP PASAJEROS ---
      const btnPassengers = document.getElementById('btn-passengers');
      const pop = document.getElementById('pp-passengers');
      const label = document.getElementById('btn-passengers-label');
      const adultsEl = document.getElementById('adults-label');
      const childrenEl = document.getElementById('children-label');
      const babiesEl = document.getElementById('babies-label');

      function i(el){ return Math.max(0, parseInt((el?.textContent || '0').trim(), 10) || 0); }
      function updatePassengersLabel(){
        const total = Math.max(1, i(adultsEl)+i(childrenEl)+i(babiesEl));
        label.textContent = String(total);
      }
      updatePassengersLabel();

      if (btnPassengers && pop){
        btnPassengers.addEventListener('click', (e)=>{
          e.stopPropagation();
          pop.classList.toggle('d-none');
        });
        document.addEventListener('click', (e)=>{
          if (!pop.classList.contains('d-none')) {
            const within = pop.contains(e.target) || btnPassengers.contains(e.target);
            if (!within) pop.classList.add('d-none');
          }
        });
        const mo = new MutationObserver(updatePassengersLabel);
        [adultsEl, childrenEl, babiesEl].forEach(n=> n && mo.observe(n, {childList:true, characterData:true, subtree:true}));
      }

      // --- GUARD: si algún script intenta abrir el modal "resume", lo cerramos ---
      const coverResume = document.getElementById('cover-resume');
      if (coverResume){
        coverResume.classList.remove('show');
        const obs = new MutationObserver(()=> {
          if (coverResume.classList.contains('show')) coverResume.classList.remove('show');
        });
        obs.observe(coverResume, { attributes:true, attributeFilter:['class'] });
      }

      // --- SYNC ANTES DE BUSCAR ---
      function syncBeforeSearch(){
        const a = i(adultsEl) || 1;
        const c = i(childrenEl);
        const b = i(babiesEl);
        const total = Math.max(1, a + c + b);

        window.info = window.info || {};
        window.info.flightInfo = window.info.flightInfo || {};
        info.flightInfo.adults = a;
        info.flightInfo.children = c;
        info.flightInfo.babies = b;
        info.flightInfo.passengers = total;
        info.flightInfo.totalPassengers = total;

        if (typeof updateLS === 'function') try{ updateLS(); }catch(e){}
        if (typeof updateDOM === 'function') try{ updateDOM(); }catch(e){}
      }

      // --- CLICK BUSCAR: sincroniza y dispara el flujo original ---
      const searchBtn = document.getElementById('search-flight');
      const btnNext   = document.getElementById('btn-next-step'); // botón real que usan los scripts
      if (searchBtn){
        searchBtn.addEventListener('click', function(e){
          e.preventDefault();
          // cerrar popover si está abierto
          if (pop && !pop.classList.contains('d-none')) pop.classList.add('d-none');

          syncBeforeSearch();

          // intentar usar el flujo original
          if (btnNext) {
            btnNext.click();         // dispara la búsqueda que espera index.js
            return;
          }

          // fallback: si existe una referencia global a "btnSearchFlight" o función de búsqueda
          try{
            if (window.btnSearchFlight && typeof window.btnSearchFlight.click === 'function'){
              window.btnSearchFlight.click();
              return;
            }
            if (typeof window.launchSearch === 'function'){
              window.launchSearch();
              return;
            }
          }catch(_){}

          // último recurso: no hacer nada (evitamos romper)
        });
      }
    })();
    </script>
</body>
</html>
