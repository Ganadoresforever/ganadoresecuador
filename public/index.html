<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Avianca - Find cheap tickets and flights</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="shortcut icon" href="./assets/favicon.svg" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/calendar.css">
  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="./css/normalize.css">
  <link rel="stylesheet" href="./css/styles.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/10.1.0/jsrsasign-all-min.js"></script>
  <script src="./js/functions.js"></script>

  <!-- ===========================
       DESKTOP: buscador compacto
       (NO toca móvil)
       =========================== -->
  <style id="desktop-search-patch">
    @media (min-width:1024px){
      .main--card--header{justify-content:flex-start !important;padding:8px 20px 0 !important;}
      .main--card--header form{ margin:0 !important; }
      .sp-initial-content .main--card{max-width:1240px;margin:0 auto;border-radius:18px;box-shadow:0 10px 28px rgba(0,0,0,.06);}
      .main--card--body{
        display:grid !important;
        grid-template-columns:minmax(520px,2fr) 1fr 1fr .9fr auto;
        gap:14px;align-items:center;background:#fff;border-radius:16px;padding:16px 18px 20px !important;
      }
      .main--card--body > .main--input-group.mt-3{ margin-top:0 !important; }
      #search-flight.mt-3{ margin-top:0 !important; }
      .main--card--body .btn-ig{
        display:flex;align-items:center;gap:10px;height:56px;width:100%;
        background:#fff;border:1px solid #e7e7e7 !important;border-radius:12px;padding:0 14px;border-bottom:0 !important;
      }
      .main--card--body .btn-ig .btn-ig-icon{position:static !important;width:18px;height:18px;opacity:.9;}
      .main--card--body .btn-ig .btn-ig-label{position:static !important;font-size:12px;font-weight:600;color:#777;}
      .main--card--body .btn-ig .btn-ig-text{margin-left:auto;font-weight:800;font-size:14px;}

      /* Origen/Destino en una sola “píldora” */
      #main-destinations-selector{ grid-column:1; }
      #main-destinations-selector .main--input-group{
        display:grid;grid-template-columns:1fr 36px 1fr;gap:10px;align-items:center;
        height:56px;padding:6px 8px;background:#fff;border:1px solid #e7e7e7;border-radius:12px;box-shadow:none;
      }
      #main-destinations-selector .fd-icon{width:22px;height:22px;opacity:.8;justify-self:center;position:static !important;margin:0;}
      #main-destinations-selector .btn-ig{height:44px;border:0 !important;background:transparent;padding:0 10px 0 38px;}
      #main-destinations-selector .btn-ig-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:18px;height:18px;opacity:.9;}
      #main-destinations-selector .btn-ig-label{font-size:11px;color:#8a8a8a;margin-right:8px;}
      #main-destinations-selector .btn-ig-text{font-size:14px;font-weight:800;}

      /* Fechas (Ida/Vuelta) */
      .main--card--body > .main--input-group:nth-of-type(1){
        grid-column:2;display:grid;grid-template-columns:1fr 1fr;gap:14px;border:0 !important;
      }
      #btn-date-back.d-none{ display:none !important; }

      /* Pasajeros */
      .main--card--body > .main--input-group:nth-of-type(2){grid-column:3;border:0 !important;}
      #btn-passengers{ padding:0 14px 0 44px !important; }
      #btn-passengers .btn-ig-icon{ position:absolute; left:14px; }

      /* Botón Buscar */
      #search-flight{grid-column:5;min-width:170px;height:56px !important;border-radius:12px !important;white-space:nowrap;box-shadow:0 6px 14px rgba(0,0,0,.08);justify-self:end;}
      .btn.btn-black{height:56px;padding:0 26px;border:none;border-radius:12px;}
      .bg-main-card{ padding-top:8px !important; }
    }
  </style>

  <!-- ====== HOME MODULES CSS (aislado) ====== -->
  <style id="hm-css">
    .hm-wrap{max-width:1240px;margin:50px auto 80px;padding-inline:16px}
    .hm-title{font:800 22px/1.2 "Red Hat Display",system-ui;margin:22px 0 14px}
    .hm-slider{display:flex;gap:20px;overflow:auto;scroll-snap-type:x mandatory;padding:6px 2px}
    .hm-slider>*{scroll-snap-align:start;flex:0 0 320px}
    .hm-card{background:#fff;border:1px solid #eee;border-radius:16px;box-shadow:0 4px 14px rgba(0,0,0,.06);overflow:hidden}
    .hm-card>img{width:100%;height:160px;object-fit:cover;display:block}
    .hm-card-body{padding:12px 14px}
    .hm-card-body h3{margin:0 0 6px;font:700 16px/1.2 "Red Hat Display",system-ui;text-transform:capitalize}
    .hm-card-body p{margin:0;color:#555;font:400 13px/1.45 "Lato",system-ui}
    .hm-chip{margin-top:10px;border-radius:14px;border:1px solid #111;background:#fff;padding:6px 12px;cursor:pointer}
    .hm-hero-cards{display:flex;gap:20px;overflow:auto;scroll-snap-type:x mandatory;padding:2px}
    .hm-hero-cards>*{scroll-snap-align:start;flex:0 0 clamp(260px,33%,400px)}
    .hm-hero{position:relative;height:180px;border-radius:18px;box-shadow:0 8px 24px rgba(0,0,0,.1);background:var(--bg) center/cover no-repeat}
    .hm-hero-body{position:absolute;inset:10px auto auto 10px;color:#fff;max-width:70%}
    .hm-hero-body h3{margin:.1rem 0;font:800 18px/1.15 "Red Hat Display"}
    .hm-hero-body p{margin:0 0 .25rem;font:400 13px/1.25 "Lato"}
    .hm-btn{border:none;border-radius:12px;padding:8px 14px;cursor:pointer}
    .hm-btn.-light{background:#fff;color:#111}
    .hm-btn.-dark{background:#111;color:#fff}
    .hm-slider, .hm-hero-cards{scrollbar-width:thin}
    @media (min-width:1024px){.hm-slider,.hm-hero-cards{padding-bottom:10px}}
  </style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-17484273937">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-17484273937');
</script>
</head>
<body class="sb-hidden">

  <!-- LOADER -->
  <div class="loader show">
    <img src="./assets/svg/plane-loader.gif" alt="Loading">
  </div>

  <!-- MODAL DESTINOS -->
  <div class="cover" id="cover-destinations">
    <div class="cover--main">
      <div class="cover--header">
        <a id="close-modal"><img src="./assets/svg/left_arrow.png" alt="Back"></a>
        <h2 id="search-label">Origen</h2>
        <a id="close-modal"><img src="./assets/svg/x_icon.png" alt="Close"></a>
      </div>
      <div class="cover--body">
        <div class="search--input--container">
          <input type="text" class="search--input">
          <img class="search--input--icon" src="./assets/svg/takeoff_icon.png" alt="">
          <span id="search-input-label" class="search--input--label">Origen</span>
        </div>
        <div id="destinations"></div>
      </div>
    </div>
  </div>

  <!-- MODAL RESUMEN (oculto, compatibilidad con index.js) -->
  <div class="cover" id="cover-resume" style="display:none;">
    <div class="cover--main">
      <div class="cover--header">
        <a id="close-modal"><img src="./assets/svg/left_arrow.png" alt="Back"></a>
        <h2 id="search-label">Reserva tu vuelo</h2>
        <a id="close-modal"><img src="./assets/svg/x_icon.png" alt="Close"></a>
      </div>
      <div class="cover--body">
        <div class="main--card--header" id="resume-type-selector"></div>
        <div class="mt-3" id="resume-destinations-selector"></div>
        <!-- Botón real que algunos scripts esperan -->
        <button id="btn-next-step" class="btn btn-black mt-3 w-100" style="display:none">Buscar</button>
      </div>
    </div>
  </div>

  <!-- NAVBAR -->
  <nav class="navbar">
    <img class="navbar-hmenu" src="./assets/svg/hamburger_menu.png" alt="menu_h">
    <div class="navbar--logo">
      <img src="./assets/logos/avianca_full.svg" alt="logo">
    </div>
  </nav>

  <section class="main">
    <div class="sp-initial-content bg-main-card">
      <div class="main--card">
        <div id="main-type-selector" class="main--card--header">
          <form id="type-selector">
            <label class="radio-wrapper" for="ida_vuelta">
              <input type="radio" selected id="ida_vuelta" name="opcion_viaje" onclick="info.flightInfo.type = 1; updateLS(); updateDOM()">
              <div class="radio-circle"><div class="radio-dot"></div></div>
              <span class="radio-label">Ida y vuelta</span>
            </label>

            <label class="radio-wrapper" for="solo_ida">
              <input type="radio" id="solo_ida" name="opcion_viaje" onclick="info.flightInfo.type = 2; updateLS(); updateDOM()">
              <div class="radio-circle"><div class="radio-dot"></div></div>
              <span class="radio-label">Solo ida</span>
            </label>
          </form>
        </div>

        <div class="main--card--body">
          <!-- Origen / Destino -->
          <div id="main-destinations-selector">
            <div class="main--input-group" id="destinations-selector">
              <button class="btn-ig" id="btn-origin">
                <img class="btn-ig-icon" src="./assets/svg/takeoff_icon.png" alt="">
                <span class="btn-ig-label">Origen</span>
                <span class="btn-ig-text" id="btn-origin-label">Bogotá</span>
              </button>

              <img class="fd-icon" src="./assets/svg/flight-direction-icon.png" alt="↔">

              <button class="btn-ig" id="btn-destination">
                <img class="btn-ig-icon" src="./assets/svg/landing_icon.png" alt="">
                <span class="btn-ig-label">Destino</span>
                <span class="btn-ig-text" id="btn-destination-label">Cali</span>
              </button>
            </div>
          </div>

          <!-- Fechas -->
          <div class="main--input-group mt-3">
            <input class="d-none" type="date" id="date-go" readonly onclick="calender(this, 'go')">
            <button class="btn-ig" id="btn-date-go" type="button" onclick="document.querySelector('#date-go').click();">
              <img class="btn-ig-icon" src="./assets/svg/date-icon.png" alt="">
              <span class="btn-ig-label">Ida</span>
              <span class="btn-ig-text" id="btn-date-go-label">01/01/2001</span>
            </button>

            <input class="d-none" type="date" id="date-back" readonly onclick="calender(this, 'back')">
            <button class="btn-ig" id="btn-date-back" type="button" onclick="document.querySelector('#date-back').click()">
              <img class="btn-ig-icon" src="./assets/svg/date-icon.png" alt="">
              <span class="btn-ig-label">Vuelta</span>
              <span class="btn-ig-text" id="btn-date-back-label">01/01/2001</span>
            </button>
          </div>

          <!-- Pasajeros -->
          <div class="main--input-group mt-3" style="position:relative;">
            <button class="btn-ig" id="btn-passengers" type="button">
              <img class="btn-ig-icon" src="./assets/svg/add-passenger-icon.png" alt="">
              <span class="btn-ig-label">Pasajeros</span>
              <span class="btn-ig-text" id="btn-passengers-label">1</span>
            </button>

            <!-- Popover -->
            <div id="pp-passengers" class="d-none" style="position:absolute; left:0; right:0; top:100%; background:#fff; border:1px solid #d9d9d9; border-radius:12px; padding:14px; margin-top:6px; z-index:50;">
              <div class="passenger-selector">
                <div>
                  <p class="text-normal">Adultos</p>
                  <p class="text-thin">Desde 12 años</p>
                </div>
                <div class="passenger-btn">
                  <img src="./assets/svg/remove-icon.png" style="height: 23px; cursor:pointer;" onclick="rmP('adult');" alt="menos">
                  <h1 id="adults-label">1</h1>
                  <img src="./assets/svg/add-icon.png" style="cursor:pointer;" onclick="addP('adult');" alt="más">
                </div>
              </div>

              <div class="passenger-selector mt-2">
                <div>
                  <p class="text-normal">Niños</p>
                  <p class="text-thin">De 2 a 11 años</p>
                </div>
                <div class="passenger-btn">
                  <img src="./assets/svg/remove-icon.png" style="height: 23px; cursor:pointer;" onclick="rmP('child');" alt="menos">
                  <h1 id="children-label">0</h1>
                  <img src="./assets/svg/add-icon.png" style="cursor:pointer;" onclick="addP('child');" alt="más">
                </div>
              </div>

              <div class="passenger-selector mt-2">
                <div>
                  <p class="text-normal">Bebés</p>
                  <p class="text-thin">Menores de 2 años</p>
                </div>
                <div class="passenger-btn">
                  <img src="./assets/svg/remove-icon.png" style="height: 23px; cursor:pointer;" onclick="rmP('baby');" alt="menos">
                  <h1 id="babies-label">0</h1>
                  <img src="./assets/svg/add-icon.png" style="cursor:pointer;" onclick="addP('baby');" alt="más">
                </div>
              </div>
            </div>
          </div>

          <button id="search-flight" class="btn btn-black mt-3" type="button">Buscar</button>
        </div>
      </div>
    </div>

    <!-- PROMO SPLIT -->
    <div class="promo-split">
      <div class="promo-split__img" style="background-image:url('./assets/svg/main_banner_people.png')">
        
      </div>

      <div class="promo-split__panel">
        <div class="promo-split__panel-top">
          <div>
            <p class="promo-kicker">Lujos de</p>
            <h2 class="promo-title">temporada baja</h2>
          </div>
          <img class="promo-logo" src="./assets/logos/avianca_negative.svg" alt="Avianca">
        </div>

        <p class="promo-copy">Viaja por menos y disfruta más. Reserva ya y vuela en septiembre de 2025.</p>

        <div class="promo-split__price-cta">
          <p class="promo-price">Por trayecto desde <span class="price-xxl">USD 36</span></p>
          <button class="btn btn-light">Ver ofertas</button>
        </div>
      </div>
    </div>
  </section>

  <!-- OFERTAS -->
  <section class="cards--container">
    <h3 class="offers-title">
      Ofertas desde
      <a class="link-blue" target="_blank" href="">
        Quito <img width="15" src="./assets/svg/down_blue_arrow.png" alt="">
      </a>
    </h3>

    <div class="offers-grid">
      <a href="#" class="offer-card card--bg--gua" aria-label="Guayaquil desde USD 64">
        <div class="offer-pill">
          <div class="offer-city">Guayaquil</div>
          <div class="offer-right">
            <span class="offer-badge">Lm+&nbsp;Acumula millas</span>
            <div class="offer-price"><small>Por trayecto desde</small><strong>USD 52</strong></div>
          </div>
        </div>
      </a>

      <a href="#" class="offer-card card--bg--glp" aria-label="Manta desde USD 69">
        <div class="offer-pill">
          <div class="offer-city">Manta</div>
          <div class="offer-right">
            <span class="offer-badge">Lm+&nbsp;Acumula millas</span>
            <div class="offer-price"><small>Por trayecto desde</small><strong>USD 50</strong></div>
          </div>
        </div>
      </a>

      <a href="#" class="offer-card card--bg--cue" aria-label="Cuenca desde USD 79">
        <div class="offer-pill">
          <div class="offer-city">Cuenca</div>
          <div class="offer-right">
            <span class="offer-badge">Lm+&nbsp;Acumula millas</span>
            <div class="offer-price"><small>Por trayecto desde</small><strong>USD 45</strong></div>
          </div>
        </div>
      </a>
    </div>
  </section>

  <!-- ====== BLOQUE NUEVO: “Vuela / Novedades / Complementa” ====== -->
  <section class="hm-wrap">
    <h2 class="hm-title">Vuela como más te gusta</h2>
    <div class="hm-slider" data-autoscroll="true">
      <article class="hm-card">
        <img src="./assets/galeria/explora.webp" alt="Inspírate" />
        <div class="hm-card-body">
          <h3>Inspírate</h3>
          <p>Explora nuestros destinos y planifica tu próxima aventura. Aprovecha al máximo tu próximo viaje.</p>
        </div>
      </article>

      <article class="hm-card">
        <img src="./assets/galeria/descubre.webp" alt="Experiencia Avianca" />
        <div class="hm-card-body">
          <h3>experiencia avianca</h3>
          <p>¡Listos para despegar! Descubre los servicios a bordo que ofrecemos cuando vuelas con nosotros.</p>
        </div>
      </article>

      <article class="hm-card">
        <img src="./assets/galeria/conoce.webp" alt="Millas de avianca" />
        <div class="hm-card-body">
          <h3>millas de avianca</h3>
          <p>Explora nuestros destinos y planifica tu próxima aventura. Aprovecha al máximo tu próximo viaje.</p>
        </div>
      </article>

      <article class="hm-card">
        <img src="./assets/galeria/enterate.webp" alt="Equipaje" />
        <div class="hm-card-body">
          <h3>equipaje</h3>
          <p>Entérate de las condiciones que debes tener en cuenta al momento de preparar tu equipaje.</p>
        </div>
      </article>
    </div>

    <h2 class="hm-title">Conoce nuestras novedades</h2>
    <div class="hm-hero-cards" data-autoscroll="true">
      <article class="hm-hero" style="--bg:url('./assets/galeria/fotografia_mujer_lifemiles-red-plus-elite.png')">
        <div class="hm-hero-body">
          <h3>Volando Por Colombia</h3>
          <p>puedes obtener tu estatus</p>
          <h3>red plus elite</h3>
          <button class="hm-btn -light">Suscríbete ya</button>
        </div>
      </article>

      <article class="hm-hero" style="--bg:url('./assets/galeria/fotografia_personas_lifemiles-duplica-millas.png')">
        <div class="hm-hero-body">
          <h3>duplica tus millas volando</h3>
          <p>por colombia con tarifas</p>
          <h3>classic y flex</h3>
          <button class="hm-btn -dark">Reserva ya</button>
        </div>
      </article>

      <article class="hm-hero" style="--bg:url('./assets/galeria/banner-star.jpg')">
        <div class="hm-hero-body">
          <h3>algunos llegan al cielo,</h3>
          <p>nosotros volamos</p>
          <h3>entre las estrellas</h3>
          <button class="hm-btn -light">Conoce más</button>
        </div>
      </article>

      <article class="hm-hero" style="--bg:url('./assets/galeria/card_bussiness_es.png')">
        <div class="hm-hero-body">
          <h3>vuela en</h3>
          <p>business class</p>
          <h3>y eleva tu experiencia</h3>
          <button class="hm-btn -dark">Descubre más</button>
        </div>
      </article>
    </div>

    <h2 class="hm-title">Complementa tu experiencia</h2>
    <div class="hm-slider" data-autoscroll="true">
      <article class="hm-card">
        <img src="./assets/galeria/icon-hoteles.svg" alt="Reserva de hoteles" />
        <div class="hm-card-body">
          <h3>Reserva de hoteles</h3>
          <p>Cientos de alojamientos con hasta 40% DCTO te esperan en Booking.com.</p>
          <button class="hm-chip">Reservar</button>
        </div>
      </article>

      <article class="hm-card">
        <img src="./assets/galeria/icon-alquiler-autos.svg" alt="Alquiler de autos" />
        <div class="hm-card-body">
          <h3>Alquiler de autos</h3>
          <p>Encuentra el carro ideal para tu viaje y recoge en el aeropuerto.</p>
          <button class="hm-chip">Alquilar</button>
        </div>
      </article>

      <article class="hm-card">
        <img src="./assets/galeria/icon-civitatis.svg" alt="Tours y actividades" />
        <div class="hm-card-body">
          <h3>Tours y actividades</h3>
          <p>Descubre planes, excursiones y experiencias en tu destino.</p>
          <button class="hm-chip">Descubrir</button>
        </div>
      </article>
    </div>
  </section>
  <!-- ====== /BLOQUE NUEVO ====== -->

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="sf__inner">
      <div class="sf__top">
        <div class="sf__brand">
          <img src="./assets/logos/avianca_negative.svg" alt="Avianca" class="sf__logo">
        </div>

        <div class="sf__newsletter" aria-label="Suscripción a ofertas">
          <p class="sf__title">¿Estás buscando ofertas?</p>
          <p class="sf__subtitle">Suscríbete y sé el primero en recibir ofertas personalizadas en tu correo.</p>

          <form class="sf__form" action="#" method="post" onsubmit="return false;">
            <input class="sf__input -i-mail" type="email" placeholder="correo@email.com" required>
            <button class="btn btn-red sf__btn" type="submit">Suscríbete</button>
          </form>

          <p class="sf__legal text-thin">
            Al suscribirme acepto la <a href="#" class="sf__link">Política de Privacidad</a> y el uso de mis datos personales para recibir ofertas.
          </p>
        </div>

        <div class="sf__social">
          <p class="sf__title sf__title--social">¡Síguenos!</p>
          <img class="sf__social-sprite" width="200" src="./assets/svg/social_media_icons.png" alt="Social">
        </div>
      </div>

      <div class="sf__cols">
        <div class="sf__col">
          <h4 class="sf__col-title">Descubre y compra</h4>
          <ul class="sf__list">
            <li><a href="#">Vuelos baratos</a></li>
            <li><a href="#">Reservas de hoteles</a></li>
            <li><a href="#">Alquiler de autos</a></li>
            <li><a href="#">Tours y excursiones</a></li>
            <li><a href="#">Asistencia en viaje</a></li>
            <li><a href="#">avianca connect</a></li>
          </ul>
        </div>

        <div class="sf__col">
          <h4 class="sf__col-title">Sobre nosotros</h4>
          <ul class="sf__list">
            <li><a href="#">Somos avianca</a></li>
            <li><a href="#">Trabaja con nosotros</a></li>
            <li><a href="#">Noticias corporativas</a></li>
            <li><a href="#">Alianzas y beneficios</a></li>
            <li><a href="#">Sostenibilidad</a></li>
            <li><a href="#">Plan de accesibilidad</a></li>
          </ul>
        </div>

        <div class="sf__col">
          <h4 class="sf__col-title">Nuestros portales</h4>
          <ul class="sf__list">
            <li><a href="#">Programa Lifemiles</a></li>
            <li><a href="#">avianca empresas</a></li>
            <li><a href="#">aviancadirect</a></li>
            <li><a href="#">avianca trade</a></li>
            <li><a href="#">avianca cargo</a></li>
            <li><a href="#">Relación con inversionistas</a></li>
          </ul>
        </div>

        <div class="sf__col">
          <h4 class="sf__col-title">Enlaces rápidos</h4>
          <ul class="sf__list">
            <li><a href="#">Información legal</a></li>
            <li><a href="#">Política de privacidad</a></li>
            <li><a href="#">Contrato de transporte</a></li>
            <li><a href="#">Artículos restringidos</a></li>
            <li><a href="#">Plan de contingencia</a></li>
            <li><a href="#">Contáctanos</a></li>
          </ul>
        </div>
      </div>

      <hr class="sf__hr">

      <div class="sf__bottom">
        <p>Copyright © Avianca 2025</p>
        <img src="./assets/svg/Powered_by.png" width="130" alt="Powered by">
      </div>
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="./js/calendar.js"></script>
  <script src="./js/index.js"></script>

  <!-- Lógica: popover pasajeros + sincronizar y disparar búsqueda real SOLO al oprimir "Buscar" -->
  <script>
    (function () {
      // --- POPUP PASAJEROS ---
      const btnPassengers = document.getElementById('btn-passengers');
      const pop = document.getElementById('pp-passengers');
      const label = document.getElementById('btn-passengers-label');
      const adultsEl = document.getElementById('adults-label');
      const childrenEl = document.getElementById('children-label');
      const babiesEl = document.getElementById('babies-label');

      function i(el){ return Math.max(0, parseInt((el?.textContent || '0').trim(), 10) || 0); }
      function updatePassengersLabel(){
        const total = Math.max(1, i(adultsEl)+i(childrenEl)+i(babiesEl));
        label.textContent = String(total);
      }
      updatePassengersLabel();

      if (btnPassengers && pop){
        btnPassengers.addEventListener('click', (e)=>{
          e.stopPropagation();
          pop.classList.toggle('d-none');
        });
        document.addEventListener('click', (e)=>{
          if (!pop.classList.contains('d-none')) {
            const within = pop.contains(e.target) || btnPassengers.contains(e.target);
            if (!within) pop.classList.add('d-none');
          }
        });
        const mo = new MutationObserver(updatePassengersLabel);
        [adultsEl, childrenEl, babiesEl].forEach(n=> n && mo.observe(n, {childList:true, characterData:true, subtree:true}));
      }

      // --- Cierra/impide modal de resumen si algún script lo abre
      const coverResume = document.getElementById('cover-resume');
      if (coverResume){
        coverResume.classList.remove('show');
        const obs = new MutationObserver(()=> {
          if (coverResume.classList.contains('show')) coverResume.classList.remove('show');
        });
        obs.observe(coverResume, { attributes:true, attributeFilter:['class'] });
      }

      // --- SYNC ANTES DE BUSCAR ---
      function syncBeforeSearch(){
        const a = i(adultsEl) || 1;
        const c = i(childrenEl);
        const b = i(babiesEl);
        const total = Math.max(1, a + c + b);

        window.info = window.info || {};
        window.info.flightInfo = window.info.flightInfo || {};
        info.flightInfo.adults = a;
        info.flightInfo.children = c;
        info.flightInfo.babies = b;
        info.flightInfo.passengers = total;
        info.flightInfo.totalPassengers = total;

        if (typeof updateLS === 'function') try{ updateLS(); }catch(e){}
        if (typeof updateDOM === 'function') try{ updateDOM(); }catch(e){}
      }

      // --- VALIDACIÓN ORDEN + BLOQUEO DE AUTO-BÚSQUEDA ---
      const searchBtn = document.getElementById('search-flight'); // visible
      const btnNext   = document.getElementById('btn-next-step'); // botón "real" oculto

      if (!searchBtn || !btnNext) return;

      const dateGo    = document.getElementById('date-go');
      const dateBack  = document.getElementById('date-back');
      const goLabel   = document.getElementById('btn-date-go-label');
      const backLabel = document.getElementById('btn-date-back-label');
      const originLbl = document.getElementById('btn-origin-label');
      const destLbl   = document.getElementById('btn-destination-label');

      let allowSearch = false;

      // Interceptor: evita disparos automáticos
      btnNext.addEventListener('click', function(e){
        if (!allowSearch) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return false;
        }
        // Consumir permiso (solo para este click)
        allowSearch = false;
      }, true);

      function hasValue(input){ return !!(input && input.value && input.value.trim()); }
      function looksDefault(labelEl){
        if(!labelEl) return true;
        const t = (labelEl.textContent||'').trim();
        return !t || t === '01/01/2001' || /selecciona/i.test(t);
      }
      function tripType(){
        try { return (window.info && info.flightInfo && +info.flightInfo.type) || 1; } catch(_) { return 1; }
      }

      // Enter en inputs no debe buscar
      document.addEventListener('keydown', (ev)=>{
        if (ev.key === 'Enter') {
          const t = ev.target;
          if (t && (t.matches('input,select,textarea') || t.isContentEditable)) {
            ev.preventDefault();
            return false;
          }
        }
      }, true);

      // Al oprimir "Buscar"
      searchBtn.addEventListener('click', function(e){
        e.preventDefault();

        // 1) Destino/origen
        const oTxt = (originLbl?.textContent||'').trim();
        const dTxt = (destLbl?.textContent||'').trim();
        if (!oTxt || !dTxt){
          document.getElementById('btn-origin')?.click();
          return;
        }

        // 2) Fechas
        const type = tripType();
        const needGo   = (!hasValue(dateGo)   || looksDefault(goLabel));
        const needBack = (type === 1) && (!hasValue(dateBack) || looksDefault(backLabel));
        if (needGo)   { document.getElementById('btn-date-go')?.click();   return; }
        if (needBack) { document.getElementById('btn-date-back')?.click(); return; }

        // 3) Pasajeros (cerrar pop si está abierto)
        if (pop && !pop.classList.contains('d-none')) pop.classList.add('d-none');

        // 4) Sync info.flightInfo
        syncBeforeSearch();

        // 5) Autorizar SOLO este disparo y lanzar flujo original
        allowSearch = true;
        btnNext.click();

        // Backup si tu build no usa #btn-next-step
        try{
          if (window.btnSearchFlight && typeof window.btnSearchFlight.click === 'function'){
            window.btnSearchFlight.click();
          } else if (typeof window.launchSearch === 'function'){
            window.launchSearch();
          }
        }catch(_){}
      });
    })();
  </script>

  <!-- Autoscroll de tarjetas -->
  <script>
    (function(){
      const sliders = document.querySelectorAll('.hm-slider,[data-autoscroll].hm-hero-cards,.hm-hero-cards[data-autoscroll]');
      sliders.forEach(slider=>{
        if(!slider.dataset.autoscroll) return;
        let step = 1, id;
        const tick = ()=> {
          slider.scrollLeft += step;
          if (slider.scrollLeft + slider.clientWidth >= slider.scrollWidth || slider.scrollLeft <= 0){ step *= -1; }
          id = requestAnimationFrame(tick);
        };
        const start=()=> id || (id=requestAnimationFrame(tick));
        const stop =()=> (id && cancelAnimationFrame(id), id=undefined);
        slider.addEventListener('mouseenter', stop);
        slider.addEventListener('mouseleave', start);
        start();
      });
    })();
  </script>
</body>
</html>
