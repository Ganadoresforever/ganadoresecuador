<script>
(function () {
  // helper seguro para números
  const getInt = (id, def=0) => {
    const el = document.getElementById(id);
    if (!el) return def;
    const v = parseInt(String(el.textContent || '').trim(), 10);
    return isNaN(v) ? def : v;
  };

  // sincroniza pasajeros a info.flightInfo como espera tu app
  function syncPassengersToInfo(){
    const a = Math.max(1, getInt('adults-label', 1)); // mínimo 1 adulto
    const c = Math.max(0, getInt('children-label', 0));
    const b = Math.max(0, getInt('babies-label', 0));
    const total = Math.max(1, a + c + b);

    window.info = window.info || {};
    info.flightInfo = info.flightInfo || {};
    info.flightInfo.adults = a;
    info.flightInfo.children = c;
    info.flightInfo.babies = b;
    info.flightInfo.passengers = total;
    info.flightInfo.totalPassengers = total;

    if (typeof updateLS === 'function') updateLS();
    if (typeof updateDOM === 'function') updateDOM();
  }

  const btnBuscar = document.getElementById('search-flight');
  const btnNext   = document.getElementById('btn-next-step'); // proxy oculto

  if (btnBuscar && btnNext){
    btnBuscar.addEventListener('click', function(e){
      // 1) sincroniza datos
      syncPassengersToInfo();
      // 2) dispara EXACTAMENTE la misma acción que tu flujo original
      btnNext.click();
    });
  }
})();
</script>
