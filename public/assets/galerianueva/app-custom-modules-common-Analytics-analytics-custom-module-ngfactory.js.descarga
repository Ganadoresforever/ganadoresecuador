(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1IXp":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n("+5S+");var r=n("keVe"),o=n("bT48"),i=function(){function e(e){this.storageService=e,this.analyticsHistory={events:[]}}return e.prototype.addEvent=function(e){this.analyticsHistory.events.push(e),this.storageService.setSessionStorage("storage_analytics_history",this.analyticsHistory)},e.prototype.getEvents=function(){var e=this.storageService.getSessionStorage("storage_analytics_history");return null!==e?e:this.analyticsHistory},e.prototype.clearEvents=function(){this.analyticsHistory.events=[],this.storageService.removeSessionStorage("storage_analytics_history")},e.ngInjectableDef=r.T({factory:function(){return new e(r.X(o.a))},token:e,providedIn:"root"}),e}()},"1hfv":function(e,t,n){"use strict";var r,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),function(e){e.CHECKOUT="begin_checkout",e.PURCHASE="purchase",e.ADD_TO_CART="add_to_cart",e.VIEW_ITEM_LIST="view_item_list",e.ADD_PAYMENT_INFO="add_payment_info",e.VIEW_ITEM="view_item",e.SELECT_ITEM="select_item",e.REMOVE_FROM_CART="remove_from_cart",e.SELECT_PROMOTION="select_promotion"}(r||(r={})),function(e){e.NA="NA",e.NOT_SET="Not set"}(o||(o={}))},"9WKO":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("bb6g"),o=n("+5S+"),i=(n("mEhM"),function(e){function t(t,n){var r=e.call(this,t)||this;return r.analyticsEventBus=t,r.analyticsStorageService=n,r.type=o.e.PURCHASE,r}return r.__extends(t,e),t.prototype.buildEvent=function(){return this.buildCurrentOrderAnalyticsEvent()},t.prototype.sendEvent=function(e){this.analyticsEventBus.publish(e)},t.prototype.buildCurrentOrderAnalyticsEvent=function(){return{type:o.e.PURCHASE,data:this.analyticsStorageService.getCurrentOrder()}},t}(o.q))},NJwh:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("ctC7"),o=n("+5S+"),i=(n("mEhM"),n("keVe")),a=n("bT48"),s=function(){function e(e){this.storageService=e}return e.prototype.searchFlightByStationCode=function(e){var t=Object(o.ie)(),n=t?"data_"+t.toLowerCase():"data_",i=this.storageService.getSessionStorage(n),a=i?i[r.a.STATIONS]:[],s=a?a.find((function(t){return t.code===e})):[];return void 0!==s?s.countryCode:""},e.ngInjectableDef=i.T({factory:function(){return new e(i.X(a.a))},token:e,providedIn:"root"}),e}()},NmiA:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.BOOKING="Booking",e.UMBRACO="UMBRACO"}(r||(r={}))},YQ03:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.METHOD_CA="CA",e.METHOD_VI="VI",e.METHOD_AX="AX",e.METHOD_TP="TP",e.METHOD_DC="DC",e.METHOD_DS="DS",e.METHOD_EL="EL",e.METHOD_DB="DB",e.METHOD_VO="VO",e.METHOD_MA="MA",e.METHOD_CC="CC"}(r||(r={}))},gWwa:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n("keVe").q)("ANALYTICS_EVENT_SERVICE")},iAjA:function(e,t,n){"use strict";n.r(t);var r,o=n("keVe"),i=n("u/N8"),a=n("0teh"),s=(n("CO41"),n("kVON"),n("+5S+")),c=n("zvoD"),u=function(){function e(){}return e.prototype.errorMessageToErrorMapper=function(e){var t=e.split("-"),n="NA",r=e;return t.length>1&&(n=t[0].replace(/\s/g,""),r=t[1].trim()),{code:n,description:r}},e}(),p=function(){function e(e,t,n,r,o,i,a,s){this.analyticsEventBusCustom=e,this.dataInitialValueService=t,this.elementRef=n,this.sessionStore=r,this.storageService=o,this.errorMessageToErrorService=i,this.sendAnalyticsEvent=a,this.eventBusService=s}return e.prototype.ngOnInit=function(){this.subscribeToAnalyticsEvent(),this.registerErrorEvents()},e.prototype.registerErrorEvents=function(){var e=this;this.eventBusService.eventNotifier$.pipe(Object(c.a)((function(e){return"errorEvent"===e.type}))).subscribe((function(t){var n=t&&t.payload&&t.payload.hasOwnProperty("errorMessage")?t.payload.errorMessage:"undefined custom error",r=e.errorMessageToErrorService.errorMessageToErrorMapper(n);e.publishAnalyticsErrorEvent(r)}))},e.prototype.selectAnalyticsEventSenders=function(e){var t=[],n=this.sendAnalyticsEvent.find((function(t){return t.type===e.type}));return n&&t.push(n),t},e.prototype.recordEvent=function(e,t,n){e.forEach((function(e){return e.recordEvent(t,n)})),this.analyticsEventBusCustom.finishEvent.next()},e.prototype.subscribeToAnalyticsEvent=function(){var e=this;this.analyticsEventBusCustom.events$.subscribe({next:function(t){e.handleAnalyticsEvent(t)}})},e.prototype.handleAnalyticsEvent=function(e){if(e&&e.data){var t=this.selectAnalyticsEventSenders(e);t.length>0&&this.recordEvent(t,e.data,e.extraData)}},e.prototype.publishAnalyticsErrorEvent=function(e){var t={type:i.a.ERROR_VIEW,data:this.sessionStore.getSession().session.booking,extraData:e};this.analyticsEventBusCustom.publish(t)},e}(),g=[p],d=function(){return function(){}}(),h=n("vZpa"),m=n("dEHb"),f=n("tBX/"),y=n("GYW9"),l=n("bT48"),v=n("RtT/"),b={passengerTypes:[v.eb.ADT,v.eb.CHD,v.eb.TNG,v.eb.INF]},S=function(e){return e[e.Journey=0]="Journey",e[e.PerpaxSegmentOutbound=1]="PerpaxSegmentOutbound",e[e.PerpaxSegmentInbound=2]="PerpaxSegmentInbound",e[e.PerpaxJourneyOutbound=3]="PerpaxJourneyOutbound",e[e.PerpaxJourneyInbound=4]="PerpaxJourneyInbound",e}({});!function(e){e.SERVICE="service",e.SELECT="select",e.SEATMAP="seatmap",e.PAYMENT="payment"}(r||(r={}));var E,I=function(){function e(e,t){this.baseItemMapperCustom=e,this.sessionStore=t,this.pathname=window.location.pathname.toLocaleLowerCase()}return e.prototype.convertCustom=function(e){return this.baseItemMapperCustom.setBooking(e),{currency:this.baseItemMapperCustom.getCurrency(),coupon:this.baseItemMapperCustom.getCoupon(),funnel_category:this.baseItemMapperCustom.getFunnelCategory(),trip_type:this.baseItemMapperCustom.getTrip(),value:this.sendTotamAmount(),items:this.getItemsFromBooking()}},e.prototype.getValueWithoutTax=function(e){var t=0;return Object.keys(e.pricing.breakdown).forEach((function(n){e.pricing.breakdown[n].forEach((function(e){t+=e.charges.filter((function(e){return e.type!==s.W.TAX})).reduce((function(e,t){return e+t.amount}),0)}))})),t},e.prototype.getItemsFromBooking=function(){return this.pathname.includes(r.SERVICE)?this.baseItemMapperCustom.getDinamicItemsAddToCart(S.PerpaxSegmentOutbound,!1).concat(this.baseItemMapperCustom.getDinamicItemsAddToCart(S.PerpaxSegmentInbound,!1)).concat(this.baseItemMapperCustom.getDinamicItemsAddToCart(S.PerpaxJourneyOutbound,!1)).concat(this.baseItemMapperCustom.getDinamicItemsAddToCart(S.PerpaxJourneyInbound,!1)):this.pathname.includes(r.SELECT)?this.baseItemMapperCustom.getDinamicItems(S.Journey,!0):this.pathname.includes(r.SEATMAP)?this.baseItemMapperCustom.getDinamicItemsAddToCart(S.PerpaxSegmentOutbound,!1).concat(this.baseItemMapperCustom.getDinamicItemsAddToCart(S.PerpaxSegmentInbound,!1)):void 0},e.prototype.sendTotamAmount=function(){return this.pathname.includes(r.SERVICE)?this.baseItemMapperCustom.getTotalAmount():this.pathname.includes(r.SELECT)?this.baseItemMapperCustom.getValue():this.pathname.includes(r.SEATMAP)?this.baseItemMapperCustom.getTotalAmountSeat():void 0},e}();!function(e){e.GOOGLE="Google"}(E||(E={}));var A,C=function(){function e(){}return e.prototype.initDataLayer=function(){window.dataLayer||(window.dataLayer=window.dataLayer||[])},e.prototype.recordEvent=function(e,t){this.initDataLayer(),window.dataLayer&&!window.dataLayer.some((function(t){return t.event===e}))&&window.dataLayer.push({event:e,ecommerce:t})},e.prototype.recordEventData=function(e,t){this.initDataLayer(),window.dataLayer&&!window.dataLayer.some((function(t){return t.event===e}))&&window.dataLayer.push(Object.assign({event:e},t))},e.prototype.recordEventDataMultiple=function(e,t){this.initDataLayer(),window.dataLayer&&window.dataLayer.push({event:e,ecommerce:t})},e}(),_=n("jqPa"),P=function(){function e(e,t){this.addToCartDataCustomMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.ADD_FLIGHT_TO_CART,this.providerEvent=_.a.ADD_TO_CART}return e.prototype.recordEvent=function(e){var t=this.addToCartDataCustomMapper.convertCustom(e);t.items.length>0&&this.googleAnalyticsServiceCustom.recordEvent(this.providerEvent,t)},e}(),T=(n("mEhM"),n("bb6g")),O=n("vlDA"),D=function(){function e(){}return e.prototype.getQuantityAdults=function(e,t,n){var r=0,o=e.pricing.breakdown.perPaxJourney.filter((function(e){return e.charges[0].code===t&&e.journeyId===n})),i=e.pax.filter((function(e){return e.type.code==v.eb.ADT})),a=[];return o.forEach((function(e){i.find((function(t){return t.id===e.paxId}))&&(a.some((function(t){return t.includes(e.paxId)}))||(r++,a.push(e.paxId)))})),r},e.prototype.getQuantityTeens=function(e,t,n,r){var o=0,i=e.pricing.breakdown.perPaxJourney.filter((function(e){return e.charges[0].code===t&&e.journeyId===n})),a=e.pax.filter((function(e){return e.type.code==r})),s=[];return i.forEach((function(e){a.find((function(t){return t.id===e.paxId}))&&(s.some((function(t){return t.includes(e.paxId)}))||(o++,s.push(e.paxId)))})),o},e.prototype.getQuantityInfants=function(e,t,n){var r=0,o=e.pricing.breakdown.perPaxJourney.filter((function(e){return e.charges[0].code===t&&e.journeyId===n})),i=e.pax.filter((function(e){return e.type.code==v.eb.INF})),a=[];return o.forEach((function(e){i.find((function(t){return t.id===e.paxId}))&&(a.some((function(t){return t.includes(e.paxId)}))||(r++,a.push(e.paxId)))})),r},e.prototype.getQuantityChilds=function(e,t,n){var r=0,o=e.pricing.breakdown.perPaxJourney.filter((function(e){return e.charges[0].code===t&&e.journeyId===n})),i=e.pax.filter((function(e){return e.type.code==v.eb.CHD})),a=[];return o.forEach((function(e){i.find((function(t){return t.id===e.paxId}))&&(a.some((function(t){return t.includes(e.paxId)}))||(r++,a.push(e.paxId)))})),r},e.prototype.getQuantityService=function(e,t,n){return e.filter((function(e){return e.charges[0].code===t&&e.journeyId===n})).length},e.prototype.getPriceService=function(e,t,n){var r=e.filter((function(e){return e.charges[0].code===t&&e.journeyId===n})).reduce((function(e,t){return e+t.totalAmount}),0);return Number(r.toFixed(2))},e.prototype.getTypeService=function(e,t,n){return["CBAG","BBAG","ABAG"].includes(n),e.find((function(e){return e.id===t})).type},e.prototype.getCarrierCodes=function(e){return e.map((function(e){return e.transport.carrier.code.trim()})).join(v.vb.PIPE)},e.prototype.getJourneyFare=function(e){var t=e.fares[e.fares.length-1];return t.productClass+t.serviceBundleCode},e}(),x=function(){function e(){}return e.prototype.getQuantityAdults=function(e,t){var n=0,r=e.pax.filter((function(e){return e.type.code==v.eb.ADT}));return t.forEach((function(e){r.find((function(t){return t.id===e.paxId}))&&n++})),n},e.prototype.getQuantityTeens=function(e,t,n){var r=0,o=e.pax.filter((function(e){return e.type.code==n}));return t.forEach((function(e){o.find((function(t){return t.id===e.paxId}))&&r++})),r},e.prototype.getQuantityInfants=function(e,t){var n=0,r=e.pax.filter((function(e){return e.type.code==v.eb.INF}));return t.forEach((function(e){r.find((function(t){return t.id===e.paxId}))&&n++})),n},e.prototype.getQuantityChilds=function(e,t){var n=0,r=e.pax.filter((function(e){return e.type.code==v.eb.CHD}));return t.forEach((function(e){r.find((function(t){return t.id===e.paxId}))&&n++})),n},e.prototype.getTypeService=function(e,t){return e.find((function(e){return e.id===t})).type},e.prototype.getSeatCodes=function(e,t){var n=[];return t.forEach((function(t){n.push(e.find((function(e){return e.id.toString().includes(t.referenceId)})).code)})),n.join(v.vb.PIPE)},e.prototype.getCarrierCodes=function(e){return e.map((function(e){return e.transport.carrier.code.trim()})).join(v.vb.PIPE)},e.prototype.getJourneyFare=function(e){var t=e.fares[e.fares.length-1];return t.productClass+t.serviceBundleCode},e}();!function(e){e.FLIGHT="Flight",e.ANCILLARY="Ancillary"}(A||(A={}));var M,N,w,k=n("NJwh");!function(e){e.INTERNATIONAL="INTERNATIONAL",e.DOMESTIC="DOMESTIC"}(M||(M={})),function(e){e.SpecialAssistance="SpecialAssistance",e.Seat="Seat",e.Priority="Priority",e.Lounge="BusinessLounge",e.Baggage="Baggage"}(N||(N={})),function(e){e.BLND="Visual",e.DEAF="Hearing",e.SVAN="ServiceDog",e.ESAN="Animal",e.WCHR="Wheelchair",e.WCHS="Wheelchair",e.WCOB="Wheelchair"}(w||(w={}));var L,R=n("ulgn"),H=n("kebn");!function(e){e.Guest="Guest"}(L||(L={}));var U,B,J=function(){function e(e,t,n,r){this.analyticsConfig=e,this.searchFlightByStationCodeCustomService=t,this.journeyControlConfig=n,this.storageService=r,this.index=0,this.mapperAncillariesPerPaxJourney=new D,this.mapperAncillariesPerPaxSegment=new x}return e.prototype.getItemName=function(e,t,n,r){switch(n){case S.Journey:return t.origin+s.Sb.DASH+t.destination;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:var o=this.mapperAncillariesPerPaxJourney.getTypeService(e.services,t.referenceId,t.charges[0].code);return""+t.charges[0].code+o.toLocaleUpperCase();case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var i=r.filter((function(e){return e.charges[0].code===t.charges[0].code}));switch(o=this.mapperAncillariesPerPaxSegment.getTypeService(e.services,i[0].referenceId)){case N.SpecialAssistance:var a=Object.keys(w).indexOf(t.charges[0].code);return"Special"+Object.values(w)[a]+"Assistance";case N.Seat:return a=Object.keys(R.a).indexOf(t.charges[0].code),""+Object.values(R.a)[a]+o.toLocaleUpperCase();default:return o}}},e.prototype.getItemId=function(e,t,n,r){switch(n){case S.Journey:return this.getFlightsNumbers(t.segments);case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return t.charges[0].code;case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var o=r.filter((function(e){return e.charges[0].code===t.charges[0].code}));switch(this.mapperAncillariesPerPaxSegment.getTypeService(e.services,o[0].referenceId)){case N.Seat:var i=r.filter((function(e){return e.charges[0].code===t.charges[0].code&&t.charges[0].code in R.a}));return this.mapperAncillariesPerPaxSegment.getSeatCodes(e.services,i);default:return t.charges[0].code}}},e.prototype.getItemPrice=function(e,t,n,r,o){switch(n){case S.Journey:var i=t.fares.reduce((function(e,t){return e+t.totalAmount}),0);return Number(i.toFixed(2));case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getPriceService(e.pricing.breakdown.perPaxJourney,t.charges[0].code,r);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var a=o.filter((function(e){return e.charges[0].code===t.charges[0].code}));return Number(a.reduce((function(e,t){return e+t.totalAmount}),0).toFixed(2))}},e.prototype.getItemBrand=function(e,t,n){switch(t){case S.Journey:return this.getCarrierCodes(e.segments);case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getCarrierCodes(n);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:return this.mapperAncillariesPerPaxSegment.getCarrierCodes(n)}},e.prototype.getItemCategory=function(e,t,n,r){switch(n){case S.Journey:return A.FLIGHT;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return A.ANCILLARY;case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var o=r.filter((function(e){return e.charges[0].code===t.charges[0].code})),i=this.mapperAncillariesPerPaxSegment.getTypeService(e.services,o[0].referenceId);switch(i){case N.SpecialAssistance:return N.SpecialAssistance;case N.Seat:default:return i}}},e.prototype.getItemCategory2=function(e,t){switch(e){case S.Journey:return 0===this.index?s.sb.Outbound:s.sb.Inbound;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:return t}},e.prototype.getItemCategory3=function(){return O.a.NA},e.prototype.getItemCategory4=function(){return O.a.NA},e.prototype.getFlightsNumbers=function(e){return e.map((function(e){return e.transport.carrier.code.trim()+e.transport.number.trim()})).join(s.Sb.PIPE)},e.prototype.getNumberPassengers=function(e){var t=this,n=0;return e.forEach((function(e){t.analyticsConfig.passengerTypes.some((function(t){return t===e.type.code}))&&(n+=1)})),n},e.prototype.getItemVariant=function(e,t,n){switch(t){case S.Journey:return this.getJourneyFare(e);case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getJourneyFare(n);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:return this.mapperAncillariesPerPaxSegment.getJourneyFare(n)}},e.prototype.getJourneyFare=function(e){var t=e.fares[e.fares.length-1];return t.productClass+t.serviceBundleCode},e.prototype.getItemQuantity=function(e,t,n,r,o){switch(n){case S.Journey:return this.getNumberPassengers(e.pax);case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getQuantityService(e.pricing.breakdown.perPaxJourney,t.charges[0].code,r);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:return o.filter((function(e){return e.charges[0].code===t.charges[0].code})).length}},e.prototype.getItemCurrency=function(e){return e.pricing.currency},e.prototype.getItemDiscount=function(){return O.a.NA},e.prototype.getItemDateFlight=function(e,t,n){switch(t){case S.Journey:return this.getDepartureDate(n).toString().replace(/[-]/g,"");case S.PerpaxJourneyOutbound:case S.PerpaxSegmentOutbound:return e.journeys[0].std.toString().split("T")[0].replace(/[-]/g,"");case S.PerpaxJourneyInbound:case S.PerpaxSegmentInbound:return e.journeys[1].std.toString().split("T")[0].replace(/[-]/g,"")}},e.prototype.getItemAdultNum=function(e,t,n,r,o){switch(n){case S.Journey:return e.pax.filter((function(e){return e.type.code===v.eb.ADT})).length;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getQuantityAdults(e,t.charges[0].code,r);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var i=o.filter((function(e){return e.charges[0].code===t.charges[0].code}));switch(this.mapperAncillariesPerPaxSegment.getTypeService(e.services,i[0].referenceId)){case N.Seat:return this.mapperAncillariesPerPaxSegment.getQuantityAdults(e,i);default:var a=i.filter((function(e,t){return i.findIndex((function(t){return e.paxId===t.paxId}))===t}));return this.mapperAncillariesPerPaxSegment.getQuantityAdults(e,a)}}},e.prototype.getItemTeenagerNum=function(e,t,n,r,o){var i=v.eb.TNG;switch(n){case S.Journey:return e.pax.filter((function(e){return e.type.code===i})).length;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getQuantityTeens(e,t.charges[0].code,r,i);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var a=o.filter((function(e){return e.charges[0].code===t.charges[0].code}));switch(this.mapperAncillariesPerPaxSegment.getTypeService(e.services,a[0].referenceId)){case N.Seat:return this.mapperAncillariesPerPaxSegment.getQuantityTeens(e,a,i);default:var s=a.filter((function(e,t){return a.findIndex((function(t){return e.paxId===t.paxId}))===t}));return this.mapperAncillariesPerPaxSegment.getQuantityTeens(e,s,i)}}},e.prototype.getItemChildNum=function(e,t,n,r,o){switch(n){case S.Journey:return e.pax.filter((function(e){return e.type.code===v.eb.CHD})).length;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getQuantityChilds(e,t.charges[0].code,r);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var i=o.filter((function(e){return e.charges[0].code===t.charges[0].code}));switch(this.mapperAncillariesPerPaxSegment.getTypeService(e.services,i[0].referenceId)){case N.Seat:return this.mapperAncillariesPerPaxSegment.getQuantityChilds(e,i);default:var a=i.filter((function(e,t){return i.findIndex((function(t){return e.paxId===t.paxId}))===t}));return this.mapperAncillariesPerPaxSegment.getQuantityChilds(e,a)}}},e.prototype.getItemInfantNum=function(e,t,n,r,o){switch(n){case S.Journey:return e.pax.filter((function(e){return e.type.code===v.eb.INF})).length;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:return this.mapperAncillariesPerPaxJourney.getQuantityInfants(e,t.charges[0].code,r);case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:var i=o.filter((function(e){return e.charges[0].code===t.charges[0].code}));switch(this.mapperAncillariesPerPaxSegment.getTypeService(e.services,i[0].referenceId)){case N.Seat:return this.mapperAncillariesPerPaxSegment.getQuantityInfants(e,i);default:var a=i.filter((function(e,t){return i.findIndex((function(t){return e.paxId===t.paxId}))===t}));return this.mapperAncillariesPerPaxSegment.getQuantityInfants(e,a)}}},e.prototype.getItemStopsNum=function(e,t,n){switch(t){case S.Journey:return e.segments.length-1;case S.PerpaxJourneyOutbound:case S.PerpaxJourneyInbound:case S.PerpaxSegmentOutbound:case S.PerpaxSegmentInbound:return n.segments.length-1}},e.prototype.getItemFlightType=function(e){var t=this.searchFlightByStationCodeCustomService.searchFlightByStationCode(e.journeys[0].origin),n=this.searchFlightByStationCodeCustomService.searchFlightByStationCode(e.journeys[0].destination);return this.journeyControlConfig.countries.some((function(e){return e===t&&e===n}))?M.DOMESTIC:M.INTERNATIONAL},e.prototype.getAirplaneType=function(e,t){switch(t){case S.Journey:return O.a.NA;case S.PerpaxJourneyOutbound:case S.PerpaxSegmentOutbound:return e.journeys[0].segments.map((function(e){return e.transport.carrier.code.trim()+e.transport.model.trim()})).join(s.Sb.PIPE);case S.PerpaxJourneyInbound:case S.PerpaxSegmentInbound:return e.journeys[1].segments.map((function(e){return e.transport.carrier.code.trim()+e.transport.model.trim()})).join(s.Sb.PIPE)}},e.prototype.getCarrierCodes=function(e){return e.map((function(e){return e.transport.carrier.code.trim()})).join(s.Sb.PIPE)},e.prototype.getDepartureDate=function(e){return this.convertToApiDate(Object(s.Md)(e.std))},e.prototype.convertToApiDate=function(e){var t=H(e);return null!==e?t.format("YYYY-MM-DD"):null},e.prototype.getLoginStatus=function(){return this.storageService.getSessionStorage("loginStatus")?"logged_in":L.Guest},e}();!function(e){e.INBOUND="Inbound",e.OUTBOUND="Outbound"}(U||(U={})),function(e){e.MC="Multi City",e.OW="One Way",e.RT="Round Trip"}(B||(B={}));var V,F=n("NmiA"),G=n("JHwT"),j=n("In5E");!function(e){e.COOKIE_COUPON="AV-cookieCoupon",e.COUPON_KEY="accountcode"}(V||(V={}));var Y,W=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r,i)||this;return a.analyticsConfigCustom=t,a.searchFlightByStationCodeCustomService=n,a.journeyControlConfig=r,a.cookiesStore=o,a.storageService=i,a}return T.__extends(t,e),t.prototype.setBooking=function(e){this.booking=e},t.prototype.getCurrency=function(){return this.booking.pricing.currency},t.prototype.getValue=function(){return this.booking.pricing.totalAmount},t.prototype.getCoupon=function(){return this.getAcountCodeCoupon(),this.cookiesStore.getCookie(j.a.accountCode.cookieIsValidAccountCode)&&this.cookiesStore.getCookie(V.COOKIE_COUPON)&&this.cookiesStore.getCookie(V.COOKIE_COUPON)||O.a.NA},t.prototype.getUrl=function(){return window.location.href},t.prototype.getAcountCodeCoupon=function(){var e=this;new URL(this.getUrl()).searchParams.forEach((function(t,n){n.toLowerCase()===V.COUPON_KEY&&e.cookiesStore.setCookie(V.COOKIE_COUPON,t)}))},t.prototype.getFunnelCategory=function(){return s.Cc.BOOKING.split("_")[0]},t.prototype.getTotalAmount=function(){var e=0,t=0;return void 0!==this.booking.pricing.breakdown.perPaxJourney&&this.booking.pricing.breakdown.perPaxJourney.forEach((function(t){return e+=t.totalAmount})),void 0!==this.booking.pricing.breakdown.perPaxSegment&&this.booking.pricing.breakdown.perPaxSegment.forEach((function(e){return t+=e.totalAmount})),Number(e.toFixed(2))+Number(t.toFixed(2))},t.prototype.getTotalAmountSeat=function(){var e=0;return void 0!==this.booking.pricing.breakdown.perPaxSegment&&this.booking.pricing.breakdown.perPaxSegment.forEach((function(t){t.charges.forEach((function(t){t.code in R.a&&(e+=t.amount)}))})),e},t.prototype.getTrip=function(){var e="";switch(e=s.ue.getTripType(this.booking.journeys)){case s.ac.MultiCity:e=B.MC;break;case s.ac.OneWay:e=B.OW;break;case s.ac.RoundTrip:e=B.RT}return e},t.prototype.getDinamicItems=function(e,t){void 0===t&&(t=!0);var n,r,o=[],i=[],a=this.booking.journeys[0],s=this.booking.journeys.length>1?this.booking.journeys[1]:void 0;switch(t&&(this.index=0),e){case S.Journey:o=this.booking.journeys,n=void 0!==s?s:a,r=void 0;break;case S.PerpaxJourneyOutbound:this.booking.pricing.breakdown.perPaxJourney&&(o=this.getPerPaxJourney(a),n=a,r=U.OUTBOUND);break;case S.PerpaxJourneyInbound:s&&this.booking.pricing.breakdown.perPaxJourney&&(o=this.getPerPaxJourney(s),n=s,r=U.INBOUND);break;case S.PerpaxSegmentOutbound:if(this.booking.pricing.breakdown.perPaxSegment){var c=this.booking.journeys[0].segments.map((function(e){return e.id})),u=this.getPerPaxSegment(c);i=u[0],o=u[1],n=a,r=U.OUTBOUND}break;case S.PerpaxSegmentInbound:if(this.booking.pricing.breakdown.perPaxSegment){var p=this.booking.journeys.length>1?this.booking.journeys[1].segments.map((function(e){return e.id})):void 0;if(p){var g=this.getPerPaxSegment(p);i=g[0],o=g[1],n=s,r=U.INBOUND}}}return this.getItems(o,e,r,n,i)},t.prototype.getDinamicItemsAddToCart=function(e,t){void 0===t&&(t=!0);var n,r,o=[],i=[],a=this.booking.journeys[0],s=this.booking.journeys.length>1?this.booking.journeys[1]:void 0;switch(t&&(this.index=0),e){case S.Journey:o=this.booking.journeys,n=void 0!==s?s:a,r=void 0;break;case S.PerpaxJourneyOutbound:this.booking.pricing.breakdown.perPaxJourney&&(o=this.getPerPaxJourney(a),n=a,r=U.OUTBOUND);break;case S.PerpaxJourneyInbound:s&&this.booking.pricing.breakdown.perPaxJourney&&(o=this.getPerPaxJourney(s),n=s,r=U.INBOUND);break;case S.PerpaxSegmentOutbound:if(this.booking.pricing.breakdown.perPaxSegment){var c=this.booking.journeys[0].segments.map((function(e){return e.id})),u=this.getPerPaxSegment(c);i=u[0],o=u[1],n=a,r=U.OUTBOUND}break;case S.PerpaxSegmentInbound:if(this.booking.pricing.breakdown.perPaxSegment){var p=this.booking.journeys.length>1?this.booking.journeys[1].segments.map((function(e){return e.id})):void 0;if(p){var g=this.getPerPaxSegment(p);i=g[0],o=g[1],n=s,r=U.INBOUND}}}return this.getItemsAddToCart(o,e,r,n,i)},t.prototype.getPerPaxSegment=function(e){var t=this.booking.pricing.breakdown.perPaxSegment.filter((function(t){return e.includes(t.segmentId)})),n=t.filter((function(e,t,n){return n.map((function(e){return e.charges[0].code})).indexOf(e.charges[0].code)==t})),o=Object.values(R.a);return document.location.pathname.toLocaleUpperCase().includes(r.SERVICE.toLocaleUpperCase())?[t,n=n.filter((function(e){return!o.includes(e.charges[0].code)}))]:document.location.pathname.toLocaleUpperCase().includes(r.SEATMAP.toLocaleUpperCase())?[t,n=n.filter((function(e){return o.includes(e.charges[0].code)}))]:[t,n]},t.prototype.getPerPaxJourney=function(e){var t=["0GO","0FM","0MJ"];if(this.booking.pricing.breakdown.perPaxJourney)return this.booking.pricing.breakdown.perPaxJourney.filter((function(n){return n.journeyId==e.id&&!t.includes(n.charges[0].code)})).filter((function(e,t,n){return n.map((function(e){return e.charges[0].code})).indexOf(e.charges[0].code)===t}))},t.prototype.getItems=function(e,t,n,r,o){var i=this,a=[];return e.forEach((function(s){a.push({item_name:i.getItemName(i.booking,s,t,e),item_id:i.getItemId(i.booking,s,t,o),price:i.getItemPrice(i.booking,s,t,r.id,o),item_brand:i.getItemBrand(s,t,r.segments),item_category:i.getItemCategory(i.booking,s,t,e),item_category2:i.getItemCategory2(t,n),item_category3:i.getItemCategory3(),item_category4:i.getItemCategory4(),item_variant:i.getItemVariant(s,t,r),index:i.index,quantity:i.getItemQuantity(i.booking,s,t,r.id,o),currency:i.getItemCurrency(i.booking),discount:i.getItemDiscount(),date_flight:i.getItemDateFlight(i.booking,t,s),adult_num:i.getItemAdultNum(i.booking,s,t,r.id,o)+i.getItemTeenagerNum(i.booking,s,t,r.id,o),child_num:i.getItemChildNum(i.booking,s,t,r.id,o),infant_num:i.getItemInfantNum(i.booking,s,t,r.id,o),stops_num:i.getItemStopsNum(s,t,r),flight_type:i.getItemFlightType(i.booking)}),i.index++})),a},t.prototype.getItemsAddToCart=function(e,t,n,r,o){var i=this,a=[];return e.forEach((function(s){a.push({item_name:i.getItemName(i.booking,s,t,e),item_id:i.getItemId(i.booking,s,t,o),price:i.getItemPrice(i.booking,s,t,r.id,o),item_brand:O.a.NA,item_category:i.getItemCategory(i.booking,s,t,e),item_category2:i.getItemCategory2(t,n),item_category3:i.getItemCategory3(),item_category4:i.getItemCategory4(),item_variant:O.a.NA,index:i.index,quantity:i.getItemQuantity(i.booking,s,t,r.id,o),currency:i.getItemCurrency(i.booking),discount:i.getItemDiscount(),date_flight:i.getItemDateFlight(i.booking,t,s),adult_num:i.getItemAdultNum(i.booking,s,t,r.id,o)+i.getItemTeenagerNum(i.booking,s,t,r.id,o),child_num:i.getItemChildNum(i.booking,s,t,r.id,o),infant_num:i.getItemInfantNum(i.booking,s,t,r.id,o),stops_num:i.getItemStopsNum(s,t,r),flight_type:i.getItemFlightType(i.booking),airplane_type:i.getAirplaneType(i.booking,t)}),i.index++})),a},t.prototype.getTaxAmount=function(){var e=this,t=0;return Object.keys(this.booking.pricing.breakdown).forEach((function(n){e.booking.pricing.breakdown[n].forEach((function(e){var n=e.charges.filter((function(e){return e.type===s.W.TAX})).reduce((function(e,t){return e+t.amount}),0);t+=n}))})),Number(t.toFixed(2))},t.prototype.getValueWithoutTax=function(){var e=this.booking.pricing.totalAmount-this.getTaxAmount();return Number(e.toFixed(2))},t.prototype.getEventCategory=function(e){switch(!0){case new RegExp("^/[a-z]{2}/booking/").test(e):return F.a.BOOKING;default:return F.a.UMBRACO}},t}(J),Q=function(){function e(e,t){this.baseItemMapperCustom=e,this.storageService=t,this.ACCESS_TYPE="Bono",this.REFUND_TYPE="Avianca Credits",this.FUNNEL_CATEGORY="PAYMENT"}return e.prototype.convert=function(e){var t=this.storageService.getSessionStorage(_.a.PAGE_VIEW);return this.baseItemMapperCustom.setBooking(e),{funnel_category:this.FUNNEL_CATEGORY,access_type:this.ACCESS_TYPE,refund_type:this.REFUND_TYPE,page_location:document.location.href,page_referrer:this.getPageReferrer(t),page_title:t.page_title,language:t.language,screen_resolution:t.screen_resolution}},e.prototype.getPageReferrer=function(e){return document.location.href==document.referrer&&e?e.page_location:document.referrer},e}(),q=function(){function e(e,t){this.applyVoucherMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.APPLY_VOUCHER,this.providerEvent=_.a.APPLY_VOUCHER}return e.prototype.recordEvent=function(e){var t=this.applyVoucherMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t)},e}(),K=function(){function e(e){this.baseItemMapperCustom=e}return e.prototype.convert=function(e){return this.baseItemMapperCustom.setBooking(e),{currency:this.baseItemMapperCustom.getCurrency(),value:this.baseItemMapperCustom.getValue(),coupon:this.baseItemMapperCustom.getCoupon(),funnel_category:this.baseItemMapperCustom.getFunnelCategory(),trip_type:this.baseItemMapperCustom.getTrip(),items:this.baseItemMapperCustom.getDinamicItems(S.Journey)}},e}(),X=function(){function e(e,t){this.checkoutDataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=i.a.CHECKOUT,this.providerEvent=_.a.CHECKOUT}return e.prototype.recordEvent=function(e){var t=this.checkoutDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),z=function(){function e(e){this.storageService=e,this.FUNNEL_CATEGORY="voucher consult"}return e.prototype.convert=function(e){var t=this.storageService.getSessionStorage(_.a.PAGE_VIEW),n={funnel_category:this.FUNNEL_CATEGORY,page_location:document.location.href,page_referrer:this.getPageReferrer(t),page_title:t.page_title,language:t.language,screen_resolution:t.screen_resolution,user_type:t.user_type,status_voucher:e.status_voucher,consult_type:e.consult_type};return this.storageService.getSessionStorage(_.a.CONSULT_VOUCHER)||this.storageService.setSessionStorage(_.a.CONSULT_VOUCHER+"_state",{firstPageLocation:document.location.href}),this.storageService.setSessionStorage(_.a.CONSULT_VOUCHER,n),n},e.prototype.getPageReferrer=function(e){return document.location.href==document.referrer&&e?e.page_location:document.referrer},e}(),Z=function(){function e(e,t){this.consultVoucherMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.CONSULT_VOUCHER,this.providerEvent=_.a.CONSULT_VOUCHER}return e.prototype.recordEvent=function(e){var t=this.consultVoucherMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t)},e}(),$=function(){function e(){}return e.prototype.convert=function(e){return{utm_campaign:e.utm_campaign,utm_medium:e.utm_medium,utm_content:e.utm_content,utm_source:e.utm_source}},e}(),ee=function(){function e(e,t){this.deeplinkDataMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.DEEPLINK,this.providerEvent=_.a.DEEPLINK}return e.prototype.recordEvent=function(e){var t=this.deeplinkDataMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t)},e}(),te=function(){function e(e){this.baseItemMapperCustom=e,this.eventCategory="Umbraco",this.multiplesTabs="multipletabs"}return e.prototype.convert=function(e){this.baseItemMapperCustom.setBooking(e);var t=this.getErrorTypeDecription();return{error_desc:t?this.multiplesTabs:"404 error",error_id:t?this.multiplesTabs:"404",error_pnr:""===e.bookingInfo.recordLocator?O.a.NA:e.bookingInfo.recordLocator,event_category:this.baseItemMapperCustom.getEventCategory(document.location.pathname),language:document.documentElement.lang,page_location:document.location.href,page_referrer:document.referrer,page_title:document.title,screen_resolution:screen.width+"x"+screen.height,user_id:O.a.NA,user_type:this.baseItemMapperCustom.getLoginStatus()}},e.prototype.getErrorTypeDecription=function(){return!!document.location.href.toLocaleLowerCase().includes(this.multiplesTabs)},e}(),ne=function(){function e(e,t){this.errorDataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=i.a.ERROR,this.providerEvent=_.a.ERROR}return e.prototype.recordEvent=function(e){var t=this.errorDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),re=function(){function e(e,t){this.baseItemMapperCustom=e,this.storageService=t}return e.prototype.convert=function(e){var t={funnel_category:"VOUCHER",page_location:document.location.href,page_referrer:document.referrer,page_title:document.title,language:document.documentElement.lang,screen_resolution:screen.width+"x"+screen.height,user_type:this.baseItemMapperCustom.getLoginStatus(),consult_type:e.consult_type,error_desc:e.error_desc};return this.storageService.setSessionStorage(_.a.ERROR_AV_CREDITS,t),t},e.ngInjectableDef=o.T({factory:function(){return new e(o.X(W),o.X(l.a))},token:e,providedIn:"root"}),e}(),oe=function(){function e(e,t){this.errorAviancaCreditsMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.ERROR_AV_CREDITS,this.providerEvent=_.a.ERROR_AV_CREDITS}return e.prototype.recordEvent=function(e){var t=this.errorAviancaCreditsMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t)},e.ngInjectableDef=o.T({factory:function(){return new e(o.X(re),o.X(C))},token:e,providedIn:"root"}),e}(),ie=function(){function e(e){this.baseItemMapperCustom=e}return e.prototype.convert=function(e,t){return{page_location:document.location.href,page_referrer:document.referrer,page_title:document.title,language:document.documentElement.lang,screen_resolution:screen.width+"x"+screen.height,user_type:this.baseItemMapperCustom.getLoginStatus(),user_id:O.a.NA,event_category:this.baseItemMapperCustom.getEventCategory(document.location.pathname),error_pnr:this.getRecordLocator(e),error_desc:t.description,error_id:t.code}},e.prototype.getRecordLocator=function(e){var t="NA";return e&&e.bookingInfo&&e.bookingInfo.recordLocator&&(t=e.bookingInfo.recordLocator),t},e}(),ae=function(){function e(e,t){this.errorViewDataMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.ERROR_VIEW,this.providerEvent=_.a.ERROR}return e.prototype.recordEvent=function(e,t){var n=this.errorViewDataMapper.convert(e,t);this.googleAnalyticsServiceCustom.recordEvent(this.providerEvent,n)},e}(),se=function(){function e(){}return e.prototype.convert=function(e){return{event_category:e.event_category,method:e.method?e.method:O.a.NA,event:_.a.LOGIN}},e}(),ce=function(){function e(e,t){this.loginDataMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.LOGIN,this.providerEvent=_.a.LOGIN}return e.prototype.recordEvent=function(e){var t=this.loginDataMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t)},e}();!function(e){e.PAY="/pay",e.PAY_YUNO="/payyuno",e.CPD="CPD",e.YUNO="Yuno",e.PSE="PSE",e.AV_CREDTIS="AvCredits"}(Y||(Y={}));var ue,pe=function(){function e(e,t,n){this.cookieService=e,this.baseItemsCustomMapper=t,this.storageService=n}return e.prototype.convert=function(){var e=this.storageService.getSessionStorage(_.a.PAGE_VIEW),t={country_pos:this.getCountryCode,language_nav:document.documentElement.lang,time_zone:this.getTimeZone,user_hour:this.getHour,user_type:this.baseItemsCustomMapper.getLoginStatus(),user_id:O.a.NA,ga_session_id:Date.now(),page_location:document.location.href,page_referrer:this.getPageReferrer(e),page_title:document.title,language:navigator.language,screen_resolution:screen.width+"x"+screen.height};return this.storageService.setSessionStorage(_.a.PAGE_VIEW,t),t},Object.defineProperty(e.prototype,"getCountryCode",{get:function(){var e=this.cookieService.getCookie(j.a.pointOfSale.cookieSelectedPointOfSale),t=e&&e.posCode?"OTHER"===e.posCode?e.posCode.toLowerCase():e.posCode:"EU";return"OTHER"==t.toUpperCase()?"OTR":t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getHour",{get:function(){var e=new Date;return String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getTimeZone",{get:function(){var e=(new Date).getTimezoneOffset(),t=e>0?"-":"+",n=Math.abs(e);return"GMT"+t+Math.floor(n/60).toString().padStart(2,"0")+":"+(n%60).toString().padStart(2,"0")},enumerable:!0,configurable:!0}),e.prototype.getProvider=function(){var e=this;return j.a.countriesToYunoPaymentProvider.some((function(t){return t.includes(e.getCountryCode)}))?Y.YUNO:Y.CPD},e.prototype.getPageReferrer=function(e){return document.location.href==document.referrer&&e?e.page_location==document.location.href?e.page_referrer:e.page_location:document.location.href==document.referrer&&e?e.page_location:document.referrer},e}(),ge=function(){function e(e,t){this.pageViewDataMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.PAGE_VIEW,this.providerEvent=_.a.PAGE_VIEW}return e.prototype.recordEvent=function(){var e=this.pageViewDataMapper.convert();document.location.pathname.toLocaleUpperCase().includes(r.PAYMENT.toLocaleUpperCase())&&(e.payment_provider=this.pageViewDataMapper.getProvider()),this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,e)},e}(),de=function(){function e(e,t){this.baseItemMapperCustom=e,this.storageService=t}return e.prototype.convert=function(e){this.baseItemMapperCustom.setBooking(e.booking);var t={funnel_category:"VOUCHER",access_type:"PNR",page_location:document.location.href,access_id:e.booking.bookingInfo.recordLocator,popup_name:e.popup_name,popup_step:e.popup_step};return this.storageService.setSessionStorage(_.a.APPLY_VOUCHER,t),t},e}(),he=function(){function e(e,t){this.popupVoucherMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.POPUP_VOUCHER,this.providerEvent=_.a.POPUP_VOUCHER}return e.prototype.recordEvent=function(e){var t=this.popupVoucherMapper.convert(e);document.location.pathname.toLocaleUpperCase().includes(r.PAYMENT.toLocaleUpperCase())&&this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t)},e}();!function(e){e.VISA="Visa",e.AMERICAN="American Express",e.DISCOVER="Discover Card",e.DINNERS="Diners Club",e.MASTERCARD="Master Card",e.UATP="UATP",e.ELO="ELO",e.PSE="PSE",e.VOUCHER="Avianca Credits"}(ue||(ue={}));var me,fe=n("YQ03"),ye=function(){function e(e,t){this.baseItemMapperCustom=e,this.sessionStore=t}return e.prototype.convert=function(e){return this.baseItemMapperCustom.setBooking(e),{currency:e.pricing.currency,tax:this.baseItemMapperCustom.getTaxAmount(),value:this.baseItemMapperCustom.getValueWithoutTax(),coupon:this.baseItemMapperCustom.getCoupon(),pnr:e.bookingInfo.recordLocator,transaction_id:this.getTransactionId(e.bookingInfo),funnel_category:this.baseItemMapperCustom.getFunnelCategory(),trip_type:this.baseItemMapperCustom.getTrip(),payment_type:this.getPaymentTypes(e.payments),bank_id:O.a.NA,items:this.getItemsFromBooking()}},e.prototype.getTransactionId=function(e){return e.createdDate.split("T")[0].split("-").join("")+"_"+e.recordLocator},e.prototype.getPaymentTypes=function(e){for(var t=e,n=[],r=e.filter((function(e){return"CC"==e.paymentMethod})),o=0;o<t.length;o++){var i=void 0!==e[o]?e[o].paymentType:O.a.NA;switch(void 0!==e[o]?e[o].paymentMethod:O.a.NA){case fe.a.METHOD_VI:n.push(ue.VISA+s.Sb.PIPE+i);break;case fe.a.METHOD_AX:n.push(ue.AMERICAN+s.Sb.PIPE+i);break;case fe.a.METHOD_DC:n.push(ue.DINNERS+s.Sb.PIPE+i);break;case fe.a.METHOD_DS:n.push(ue.DISCOVER+s.Sb.PIPE+i);break;case fe.a.METHOD_MA:case fe.a.METHOD_CA:n.push(ue.MASTERCARD+s.Sb.PIPE+i);break;case fe.a.METHOD_TP:n.push(ue.UATP+s.Sb.PIPE+i);break;case fe.a.METHOD_DB:n.push(ue.PSE+s.Sb.PIPE+i);break;case fe.a.METHOD_EL:n.push(ue.ELO+s.Sb.PIPE+i)}}return r.length&&n.push(ue.VOUCHER+s.Sb.PIPE+"Voucher"),n.join(s.Sb.PIPE)},e.prototype.getNumPassengers=function(e,t){var n=e.filter((function(e){return e.type.code===t}));return n?n.length:0},e.prototype.getItemsFromBooking=function(){return this.baseItemMapperCustom.getDinamicItems(S.Journey,!1).concat(this.baseItemMapperCustom.getDinamicItems(S.PerpaxJourneyOutbound,!1)).concat(this.baseItemMapperCustom.getDinamicItems(S.PerpaxJourneyInbound,!1)).concat(this.baseItemMapperCustom.getDinamicItems(S.PerpaxSegmentOutbound,!1)).concat(this.baseItemMapperCustom.getDinamicItems(S.PerpaxSegmentInbound,!1))},e}(),le=function(){function e(e,t,n,r){this.purchaseDataMapper=e,this.googleAnalyticsService=t,this.specifications=n,this.storageService=r,this.provider=E.GOOGLE,this.type=i.a.PURCHASE,this.providerEvent=_.a.PURCHASE}return e.prototype.recordEvent=function(e){var t=this.storageService.getSessionStorage("eventEntryIndex");null===t&&(t="0");var n=parseInt(t);if(0===n){var r=this.purchaseDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,r),n++,this.storageService.setSessionStorage("eventEntryIndex",n.toString())}},e}();n("uvDR"),function(e){e.APPLE_PAY="ApplePay",e.WE_CHAT="WeChat",e.ALIPAY="Alipay",e.UNION_PAY="UnionPay",e.JCB="jcb",e.AMERICAN_EXPRESS="AmericanExpress",e.VISA="Visa",e.MASTER_CARD="MasterCard",e.CYBERSOURCE="CS",e.DISCOVER="Discover Card",e.DINNERS="Diners Club",e.UATP="UATP",e.ELO="ELO",e.PSE="PSE",e.VOUCHER="Avianca Credits",e.AMERICAN="American Express",e.MASTERCARD="Master Card",e.METHOD_CA="CA",e.METHOD_VI="VI",e.METHOD_AX="AX",e.METHOD_TP="TP",e.METHOD_DC="DC",e.METHOD_DS="DS",e.METHOD_EL="EL",e.METHOD_DB="DB",e.METHOD_VO="VO",e.METHOD_MA="MA",e.METHOD_AG="AG"}(me||(me={}));var ve,be,Se,Ee=function(){function e(e,t,n){this.baseItemMapperCustom=e,this.sessionStore=t,this.storageService=n}return e.prototype.convert=function(e){return this.baseItemMapperCustom.setBooking(e.booking),this.sessionStore.getSession(),this.storageService.getSessionStorage("paymentProvider"),{event_category:this.baseItemMapperCustom.getEventCategory(document.location.pathname),purchase_status:e.purchase_status,status_desc:e.status_desc,total_value:this.baseItemMapperCustom.getValueWithoutTax(),pnr:e.booking.bookingInfo.recordLocator,funnel_category:this.baseItemMapperCustom.getFunnelCategory(),trip_type:this.baseItemMapperCustom.getTrip(),page_location:document.location.href,page_referrer:document.referrer,page_title:document.title,language:document.documentElement.lang,screen_resolution:screen.width+"x"+screen.height,payment_provider:this.getProvider(e.booking.payments),payment_type:this.getPaymentTypes(e.booking.payments)}},e.prototype.getPaymentTypes=function(e){for(var t=e,n=[],r=0;r<t.length;r++){var o=void 0!==e[r]?e[r].paymentType:O.a.NA,i=void 0!==e[r]?e[r].paymentMethod:O.a.NA;switch("Voucher"==o&&n.push(me.VOUCHER+s.Sb.PIPE+o),i){case me.METHOD_VI:n.push(me.VISA+s.Sb.PIPE+o);break;case me.METHOD_AX:n.push(me.AMERICAN+s.Sb.PIPE+o);break;case me.METHOD_DC:n.push(me.DINNERS+s.Sb.PIPE+o);break;case me.METHOD_DS:n.push(me.DISCOVER+s.Sb.PIPE+o);break;case me.METHOD_MA:case me.METHOD_CA:n.push(me.MASTERCARD+s.Sb.PIPE+o);break;case me.METHOD_TP:n.push(me.UATP+s.Sb.PIPE+o);break;case me.METHOD_DB:n.push(me.PSE+s.Sb.PIPE+o);break;case me.METHOD_EL:n.push(me.ELO+s.Sb.PIPE+o)}}return n.join(s.Sb.PIPE)},e.prototype.getProvider=function(e){for(var t=e,n=[],r=0;r<t.length;r++)"Voucher"==(void 0!==e[r]?e[r].paymentType:O.a.NA)?n.includes(Y.AV_CREDTIS)||n.push(Y.AV_CREDTIS):n.push(Y.CPD);return n.join(s.Sb.PIPE)},e}(),Ie=function(){function e(e,t,n){this.purchaseStatusDataMapper=e,this.googleAnalyticsServiceCustom=t,this.storageService=n,this.provider=E.GOOGLE,this.type=i.a.PURCHASE_STATUS,this.providerEvent=_.a.PURCHASE_STATUS}return e.prototype.recordEvent=function(e){var t=this.purchaseStatusDataMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventData(this.providerEvent,t),this.storageService.removeSessionStorage("paymentProvider")},e}();!function(e){e.ONE_WAY="OW",e.ROUND_TRIP="RT"}(ve||(ve={})),function(e){e.FLIGHT_TO="FlightTo",e.FLIGHT_FROM="FlightFrom"}(be||(be={})),function(e){e.DOMESTIC="Domestic",e.INTERNATIONAL="International"}(Se||(Se={}));var Ae,Ce=function(){function e(e,t,n){this.searchFlightByStationCodeCustomService=e,this.journeyControlConfig=t,this.storageService=n}return e.prototype.convert=function(e){var t,n,r,o,i,a,s,c,u,p,g=this,d=e.journeyPriceRequests;return d.forEach((function(e){if((o=e.filters.tripType[0])===ve.ROUND_TRIP){var h=d[0],m=d[1];i=g.flightsOriginInRt(h.origin,m.origin,be.FLIGHT_FROM),s=h.details.allPrice[0].begin,a=g.flightsOriginInRt(h.origin,m.origin,be.FLIGHT_TO),c=m.details.allPrice[0].end,u=g.obtainSearchTerm(h.origin,m.origin),g.originStationCode=h.origin,g.departureStationCode=m.origin}else s=e.details.allPrice[0].begin,c="NA",u=g.obtainSearchTerm(i=e.origin,a=e.destination),g.originStationCode=i,g.departureStationCode=a;p=e.corporateCode?e.corporateCode:O.a.NA,t=e.pax.ADT+(e.pax.TNG||0),n=e.pax.CHD,r=e.pax.INF})),{event_category:this.getSearchSourceFlow(),adult_num:t,child_num:n,infant_num:r,trip_type:o,flight_type:this.isDomesticOrInternationalFlight(this.originStationCode,this.departureStationCode),flight_from:i,flight_to:a,days_in_advance:this.calculateDaysAdvance(s),coupon:p,date_departure:this.formatDateToEvent(s),date_return:this.formatDateToEvent(c),search_term:u,page_location:document.location.href,page_referrer:document.referrer,page_title:document.title,language:document.documentElement.lang,screen_resolution:screen.width+"x"+screen.height}},e.prototype.getSearchSourceFlow=function(){return this.storageService.getSessionStorage(j.a.search_source_flow)},e.prototype.calculateDaysAdvance=function(e){var t=new Date,n=e.split("-").map(Number),r=Number(new Date(n[0],n[1]-1,n[2]));return Math.floor((r-Number(new Date(t.getFullYear(),t.getMonth(),t.getDate())))/864e5)},e.prototype.flightsOriginInRt=function(e,t,n){return n===be.FLIGHT_FROM?e+"|"+t:t+"|"+e},e.prototype.obtainSearchTerm=function(e,t){return e+"-"+t},e.prototype.isDomesticOrInternationalFlight=function(e,t){var n=this.journeyControlConfig.unavailableCountries,r=this.searchFlightByStationCodeCustomService.searchFlightByStationCode(e),o=this.searchFlightByStationCodeCustomService.searchFlightByStationCode(t);return n.includes(r)&&n.includes(o)?Se.DOMESTIC:Se.INTERNATIONAL},e.prototype.formatDateToEvent=function(e){var t=e.split("-");return"NA"===e?e:t.join("")},e}(),_e=function(){function e(e,t){this.searchFlightDataMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.SELECT_FLIGHT,this.providerEvent=_.a.SEARCH_FLIGHT}return e.prototype.recordEvent=function(e){var t=this.searchFlightDataMapper.convert(e);this.googleAnalyticsServiceCustom.recordEvent(this.providerEvent,t)},e}();!function(e){e.FLIGHT="Flight",e.ANCILLARY="Ancillary",e.SPECIAL_SERVICES="Special Services"}(Ae||(Ae={}));var Pe=function(){function e(){}return e.prototype.convert=function(e){return{promotion_id:e.promotion_id,promotion_name:e.promotion_name,creative_name:this.removeSlashFromCreativeName(e.creative_name),creative_slot:e.creative_slot,items:[{item_name:e.items[0].item_name,item_id:e.items[0].item_id,item_brand:O.a.NA,item_category:Ae.FLIGHT,item_category2:O.a.NA,item_category3:O.a.NA,item_category4:O.a.NA,item_variant:O.a.NA,index:e.items[0].index,quantity:O.a.NA,price:e.items[0].price||0}]}},e.prototype.removeSlashFromCreativeName=function(e){var t=e.lastIndexOf("/");return e.slice(t+1,e.length)},e}(),Te=function(){function e(e,t){this.selectPromotionDataMapper=e,this.googleAnalyticsServiceCustom=t,this.provider=E.GOOGLE,this.type=i.a.SELECT_PROMOTION,this.providerEvent=_.a.SELECT_PROMOTION}return e.prototype.recordEvent=function(e){var t=this.selectPromotionDataMapper.convert(e);this.googleAnalyticsServiceCustom.recordEventDataMultiple(this.providerEvent,t)},e}(),Oe=new o.q("analytics.config.custom"),De=new o.q("analyticsService"),xe=new o.q("sendAnalyticEventCustom"),Me=n("Km+0"),Ne=o.qb({encapsulation:2,styles:[],data:{}});function we(e){return o.Mb(0,[],null,null)}function ke(e){return o.Mb(0,[(e()(),o.sb(0,0,null,null,1,"analytics-container",[],null,null,null,we,Ne)),o.rb(1,114688,null,0,p,[a.a,f.a,o.k,y.a,l.a,u,xe,Me.a],null,null)],(function(e,t){e(t,1,0)}),null)}var Le=o.ob("analytics-container",p,ke,{},{},[]),Re=n("TOqr"),He=n("mEgG"),Ue=n("YGW8"),Be=n("xPz+"),Je=n("mweb"),Ve=n("LZ88"),Fe=n("o1fu"),Ge=n("9h0M"),je=n("KJCZ"),Ye=n("qiaM"),We=n("IkD4"),Qe=n("sb8n"),qe=n("abN+"),Ke=n("mjhu"),Xe=n("BhzZ"),ze=n("rnuF"),Ze=n("4jTv"),$e=n("IFLL"),et=n("jqsp"),tt=n("7bts"),nt=n("KC8b"),rt=n("8ceE"),ot=n("Y1nG"),it=n("KXfr"),at=n("O137"),st=n("PpwQ"),ct=n("E9el"),ut=n("uL+s"),pt=n("5UhR"),gt=n("dyNo"),dt=n("lVNg"),ht=n("xWvT"),mt=n("+diF"),ft=n("06ZC"),yt=n("QfaV"),lt=n("vyh0"),vt=n("wVEZ"),bt=n("iln4"),St=n("4fKi"),Et=n("Viyj"),It=n("jvJb"),At=n("mT32"),Ct=n("29Ry"),_t=n("v4lv"),Pt=n("6gD4"),Tt=n("hPuZ"),Ot=n("XDVN"),Dt=n("2KS9"),xt=n("0f7c"),Mt=n("f+TP"),Nt=n("YSPn"),wt=n("gN6T"),kt=n("dplf"),Lt={passengerTypes:[v.eb.ADT,v.eb.CHD,v.eb.TNG]},Rt=function(){function e(e){this.analyticsStorageService=e}return e.prototype.convert=function(e){if(e&&e.data){var t=e.data,n=this.analyticsStorageService.getCurrentOrder();return{currency:t.currency,value:t.value,coupon:null!=n.coupon?n.coupon:O.a.NOT_SET,payment_type:t.paymentType,funnel_category:t.funnelCategory,trip_type:t.tripType,bank_id:t.bankId}}},e}(),Ht=function(){function e(){this.type=s.f.FLIGHT}return e.prototype.map=function(e){return this.getItemsBase(e)},e.prototype.getItemsBase=function(e){var t=[];return e.forEach((function(e){var n=Object(s.Md)(e.std),r=n.toLocaleDateString("en-US",{year:"numeric"})+"-"+n.toLocaleDateString("en-US",{month:"2-digit"})+"-"+n.toLocaleDateString("en-US",{day:"2-digit"}),o=Object(s.Md)(e.std).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});t.push({item_id:e.transportNumber,item_name:e.name,index:e.index,item_brand:e.carrierCode,item_category:e.journeyType,item_category2:e.fareName,item_category3:r,item_category4:o,item_category5:Object(s.Md)(e.std).toLocaleDateString("en-US",{weekday:"long"}),item_variant:e.origin+" - "+e.destination,price:e.price,quantity:e.quantity})})),t},e}(),Ut=function(){function e(){this.type=v.d.ANCILLARY}return e.prototype.map=function(e){return this.getItemsBase(e)},e.prototype.getItemsBase=function(e){var t=[];return e.forEach((function(e){t.push({item_id:e.code,item_name:e.name,item_brand:e.carrierCode,item_category:e.type,item_category2:O.a.NOT_SET,item_category3:O.a.NOT_SET,item_category4:O.a.NOT_SET,item_variant:e.serviceName,price:e.price,quantity:e.quantity,index:e.index})})),t},e}(),Bt=function(){function e(){this.type=v.d.SEAT}return e.prototype.map=function(e){return this.getItemsBase(e)},e.prototype.getItemsBase=function(e){var t=[];return e.forEach((function(e){t.push({item_id:e.seatId,item_name:e.name,item_brand:e.carrierCode,item_category:e.type,item_category2:O.a.NOT_SET,item_category3:O.a.NOT_SET,item_category4:O.a.NOT_SET,item_variant:e.number,price:e.price,quantity:e.quantity,index:e.index})})),t},e}(),Jt=function(){function e(){}return e.prototype.recordEvent=function(e,t){gtag("event",e,t)},e}(),Vt=function(){function e(e){this.mapAnalyticsItemToInfraItemData=e}return e.prototype.getConverter=function(e){var t=this.mapAnalyticsItemToInfraItemData.find((function(e){return e.type===v.d.ANCILLARY})),n=this.mapAnalyticsItemToInfraItemData.find((function(t){return t.type===e}))||t;if(!n)throw new Error("No sender found for I_MAP_ANALYTICS_ITEM_TO_INFRA_ITEM_DATA of type "+e);return n},e}(),Ft=function(){function e(e,t,n){this.analyticsStorageService=e,this.selectMetricConverter=t,this.sessionStore=n}return e.prototype.convert=function(e){var t=this.sessionStore.getSession().session,n=t.booking,r={},o=this.analyticsStorageService.getCurrentOrder();return e&&e.data&&(r.currency=e.data.currency,r.funnel_category=e.data.flow,r.items=this.getItemsBaseFromAnalyticsItems(e.data.items)),r.coupon=null!=o.coupon?o.coupon:O.a.NOT_SET,r.value=this.getValueWithoutTax(n),r.trip_type=s.ue.getTripType(n.journeys),r.funnel_category=t.flow,r.adult_num=n.pax.filter((function(e){return e.type.code===s.Bb.ADT})).length,r.child_num=n.pax.filter((function(e){return e.type.code===s.Bb.CHD})).length,r.infant_num=n.pax.filter((function(e){return e.type.code===s.Bb.INF})).length,r},e.prototype.getItemsBaseFromAnalyticsItems=function(e){var t=this,n=[];return e?(Array.from(new Set(e.map((function(e){return e.type})))).forEach((function(r){var o=e.filter((function(e){return e.type===r}));o&&t.selectMetricConverter.getConverter(r).map(o).forEach((function(e){n.push(e)}))})),n):n},e.prototype.getValueWithoutTax=function(e){var t=0;return Object.keys(e.pricing.breakdown).forEach((function(n){e.pricing.breakdown[n].forEach((function(e){t+=e.charges.filter((function(e){return e.type!==s.W.TAX})).reduce((function(e,t){return e+t.amount}),0)}))})),t},e}(),Gt=n("1IXp"),jt=function(){function e(e,t,n,r){this.checkoutDataMapper=e,this.googleAnalyticsService=t,this.analyticsHistoryService=n,this.specifications=r,this.provider=E.GOOGLE,this.type=s.e.CHECKOUT,this.providerEvent=O.b.CHECKOUT}return e.prototype.recordEvent=function(e){if(this.specifications.every((function(t){return t.isSatisfiedBy(e)}))){this.analyticsHistoryService.addEvent(e);var t=this.checkoutDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)}},e}(),Yt=function(){function e(e,t,n){this.sessionStore=e,this.analyticsStorageService=t,this.selectMetricConverter=n}return e.prototype.convert=function(e){var t=this.sessionStore.getSession().session,n=t.booking,r=t.flow,o={},i=this.analyticsStorageService.getCurrentOrder();return e&&e.data&&(o.currency=n.pricing.currency,o.funnel_category=r,o.items=this.getItemsBaseFromAnalyticsItems(e.data.items)),o.value=this.getValueWithoutTax(n),o.tax=this.getTaxAmount(n),o.transaction_id=this.getTransactionId(n.bookingInfo),o.coupon=null!=i.coupon?i.coupon:O.a.NOT_SET,o.pnr=n.bookingInfo.recordLocator,o.trip_type=s.ue.getTripType(n.journeys),o.payment_type=this.getPaymentTypes(n.payments),o.bank_id=O.a.NA,o.adult_num=this.getNumPassengers(n.pax,s.Bb.ADT),o.child_num=this.getNumPassengers(n.pax,s.Bb.CHD),o.infant_num=this.getNumPassengers(n.pax,s.Bb.INF),o},e.prototype.getTaxAmount=function(e){var t=0;return Object.keys(e.pricing.breakdown).forEach((function(n){e.pricing.breakdown[n].forEach((function(e){t+=e.charges.filter((function(e){return e.type===s.W.TAX})).reduce((function(e,t){return e+t.amount}),0)}))})),t},e.prototype.getTransactionId=function(e){return""+Object(s.Pd)(Object(s.Md)(e.createdDate))+s.Sb.DASH+e.recordLocator},e.prototype.getValueWithoutTax=function(e){var t=0;return Object.keys(e.pricing.breakdown).forEach((function(n){e.pricing.breakdown[n].forEach((function(e){t+=e.charges.filter((function(e){return e.type!==s.W.TAX})).reduce((function(e,t){return e+t.amount}),0)}))})),t},e.prototype.getPaymentTypes=function(e){var t=[];return e.forEach((function(e){t.some((function(t){return t===e.paymentType+" "+s.Sb.DASH+" "+e.paymentMethod}))||t.push(e.paymentType+" "+s.Sb.DASH+" "+e.paymentMethod)})),t.join(s.Sb.SEMICOLON)},e.prototype.getNumPassengers=function(e,t){var n=e.filter((function(e){return e.type.code===t}));return n?n.length:0},e.prototype.getItemsBaseFromAnalyticsItems=function(e){var t=this,n=[];return e?(Array.from(new Set(e.map((function(e){return e.type})))).forEach((function(r){var o=e.filter((function(e){return e.type===r}));t.selectMetricConverter.getConverter(r).map(o).forEach((function(e){n.push(e)}))})),n):n},e}(),Wt=function(){function e(e,t,n,r){this.purchaseDataMapper=e,this.googleAnalyticsService=t,this.analyticsHistoryService=n,this.specifications=r,this.provider=E.GOOGLE,this.type=s.e.PURCHASE,this.providerEvent=O.b.PURCHASE}return e.prototype.recordEvent=function(e){if(this.specifications.every((function(t){return t.isSatisfiedBy(e)}))){this.analyticsHistoryService.clearEvents();var t=this.purchaseDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)}},e}(),Qt=function(){function e(e,t){this.addPaymentInfoMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=s.e.ADD_PAYMENT_INFO,this.providerEvent=O.b.ADD_PAYMENT_INFO}return e.prototype.recordEvent=function(e){var t=this.addPaymentInfoMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),qt=function(){function e(e,t,n){this.sessionStore=e,this.analyticsStorageService=t,this.selectItemMapperConverter=n}return e.prototype.convert=function(e){var t={};if(e&&e.data){var n=e.data,r=this.analyticsStorageService.getCurrentOrder();t.currency=e.data.currency,t.value=e.data.value,t.funnel_category=e.data.flow,t.items=this.getItemsBaseFromAnalyticsItems(e.data.items),t.adult_num=n.paxADTLength,t.child_num=n.paxCHDLength,t.infant_num=n.paxINFLength,t.trip_type=n.tripType,t.coupon=null!=r.coupon?r.coupon:O.a.NOT_SET}return t},e.prototype.getItemsBaseFromAnalyticsItems=function(e){var t=this,n=[];return e?(Array.from(new Set(e.map((function(e){return e.type})))).forEach((function(r){var o=e.filter((function(e){return e.type===r}));o.length>0&&t.selectItemMapperConverter.getConverter(r).map(o).forEach((function(e){n.push(e)}))})),n):n},e}(),Kt=function(){function e(e,t){this.addToCartDataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=s.e.ADD_TO_CART,this.providerEvent=O.b.ADD_TO_CART}return e.prototype.recordEvent=function(e){var t=this.addToCartDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),Xt=function(){function e(e,t){this.analyticsStorageService=e,this.selectItemMapperConverter=t}return e.prototype.convert=function(e){if(e&&e.data){var t=e.data,n=this.analyticsStorageService.getCurrentOrder();return{coupon:null!=n.coupon?n.coupon:O.a.NOT_SET,item_list_id:t.itemListId,item_list_name:t.itemListName,currency:t.currency,items:this.getItems(t.items),adult_num:t.adult_num,child_num:t.child_num,infant_num:t.infant_num}}},e.prototype.getItems=function(e){var t=this,n=[];return e?(e.map((function(e){return e.type})).forEach((function(r){var o=e.filter((function(e){return e.type===r}));if(o.length>0){var i=t.selectItemMapperConverter.getConverter(r);n=i.map(o)}})),n):n},e}(),zt=function(){function e(e,t){this.selectItemDataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=s.e.SELECT_ITEM,this.providerEvent=O.b.SELECT_ITEM}return e.prototype.recordEvent=function(e){var t=this.selectItemDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),Zt=function(){function e(e){this.selectItemMapperConverter=e}return e.prototype.convert=function(e){if(e&&e.data){var t=e.data;return{currency:t.currency,value:t.value,adult_num:t.adult_num,child_num:t.child_num,infant_num:t.infant_num,items:this.getItems(t.items)}}},e.prototype.getItems=function(e){var t=this,n=[];return e?(Array.from(new Set(e.map((function(e){return e.type})))).forEach((function(r){var o=e.filter((function(e){return e.type===r}));if(o.length>0){var i=t.selectItemMapperConverter.getConverter(r);n=i.map(o)}})),n):n},e}(),$t=function(){function e(e,t){this.viewItemdataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=s.e.VIEW_ITEM,this.providerEvent=O.b.VIEW_ITEM}return e.prototype.recordEvent=function(e){var t=this.viewItemdataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),en=n("1hfv"),tn=function(){function e(e,t){this.analyticsStorageService=e,this.selectItemMapperConverter=t}return e.prototype.convert=function(e){if(e&&e.data){var t=e.data,n=this.analyticsStorageService.getCurrentOrder();return{coupon:null!=n.coupon?n.coupon:en.a.NOT_SET,item_list_id:t.item_list_id,item_list_name:t.item_list_name,items:this.getItems(t.items),adult_num:t.adult_num,child_num:t.child_num,infant_num:t.infant_num}}},e.prototype.getItems=function(e){var t=this,n=[];return e?(Array.from(new Set(e.map((function(e){return e.type})))).forEach((function(r){var o=e.filter((function(e){return e.type===r}));o.length>0&&t.selectItemMapperConverter.getConverter(r).map(o).forEach((function(e){n.push(e)}))})),n):n},e}(),nn=function(){function e(e,t){this.viewItemListDataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=s.e.VIEW_ITEM_LIST,this.providerEvent=O.b.VIEW_ITEM_LIST}return e.prototype.recordEvent=function(e){var t=this.viewItemListDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),rn=function(){function e(e){this.sessionStore=e}return e.prototype.isSatisfiedBy=function(e){return this.sessionStore.getSession().session.booking.pricing.isBalanced},e}(),on=function(){function e(e){this.sessionStore=e}return e.prototype.isSatisfiedBy=function(e){return this.sessionStore.getSession().session.booking.bookingInfo.status!==v.w.HOLD},e}(),an=function(){function e(){}return e.prototype.convert=function(e){if(e&&e.data){var t=e.data;return{promotion_name:t.promotionName,creative_slot:t.creativeSlot,creative_name:t.creativeName,items:[]}}},e}(),sn=function(){function e(e,t){this.selectPromotionDataMapper=e,this.googleAnalyticsService=t,this.provider=E.GOOGLE,this.type=s.e.SELECT_PROMOTION,this.providerEvent=O.b.SELECT_PROMOTION}return e.prototype.recordEvent=function(e){var t=this.selectPromotionDataMapper.convert(e);this.googleAnalyticsService.recordEvent(this.providerEvent,t)},e}(),cn=function(){function e(e){this.sessionStore=e}return e.prototype.isSatisfiedBy=function(e){return!this.sessionStore.getSession().session.booking.pricing.isBalanced},e}(),un=(n("gWwa"),n("9WKO"),function(){function e(e){this.analyticsHistoryService=e}return e.prototype.isSatisfiedBy=function(e){return this.analyticsHistoryService.getEvents().events.some((function(e){return e.type===v.c.CHECKOUT}))},e}()),pn=new o.q("analytics.config"),gn=new o.q("analyticsService"),dn=new o.q("sendAnalyticEvent"),hn=new o.q("analyticsEventSpecification"),mn=new o.q("analyticsEventSpecification"),fn=new o.q("mapAnalyticsItemToInfraItemData"),yn=new o.q("gaSelectMetricConverter"),ln=n("rK10"),vn=n("z8dw"),bn=n("UXnK"),Sn=n("on14"),En=n("XDpN"),In=function(){return function(){}}(),An=n("uQCI"),Cn=n("yO4/"),_n=n("RuAv");n.d(t,"AnalyticsCustomModuleNgFactory",(function(){return Pn}));var Pn=o.pb(d,[],(function(e){return o.zb([o.Ab(512,o.j,o.cb,[[8,[h.a,h.b,h.h,h.i,h.e,h.f,h.g,m.a,Le]],[3,o.j],o.y]),o.Ab(4608,Re.q,Re.p,[o.v,[2,Re.I]]),o.Ab(4608,He.B,He.B,[]),o.Ab(4608,He.f,He.f,[]),o.Ab(4608,Ue.i,Ue.i,[o.C,[2,Ue.b],[2,Ue.a],[2,Ue.c]]),o.Ab(4608,Be.v,Be.v,[o.j,o.r,Be.jb,Be.w]),o.Ab(4608,Je.a,Je.a,[Be.v,o.g]),o.Ab(4608,Ve.j,Fe.a,[Ve.e,Ge.c,je.a]),o.Ab(4608,Ve.k,Ye.a,[Ve.j]),o.Ab(4608,Ve.l,We.a,[]),o.Ab(4608,Ve.o,Qe.a,[qe.a,G.a,l.a,Ke.a,Ve.e,Xe.a,ze.a,Ze.a,Me.a,Re.j]),o.Ab(4608,Ve.n,$e.a,[ze.a]),o.Ab(4608,Ve.r,et.a,[]),o.Ab(5120,tt.b,(function(e,t){return[new nt.a(e),new rt.a(t)]}),[l.a,l.a]),o.Ab(5120,ot.a,(function(e,t,n,r,o,i){return[new it.a,new at.a(e,t,n),new st.a(r,o,i)]}),[G.a,l.a,y.a,G.a,l.a,y.a]),o.Ab(5120,ct.a,(function(){return[new ut.a,new pt.a,new gt.a,new dt.a,new ht.a]}),[]),o.Ab(4608,mt.a,mt.a,[Ve.e,ot.a]),o.Ab(4608,ft.a,ft.a,[mt.a,Ve.e]),o.Ab(4608,yt.a,yt.a,[ct.a]),o.Ab(4608,lt.a,lt.a,[]),o.Ab(4608,Ve.p,vt.a,[]),o.Ab(4608,Ve.b,bt.a,[Ge.c,je.a,Ve.e]),o.Ab(4608,Ve.z,St.a,[Ge.c,je.a,Ve.e]),o.Ab(5120,Ve.v,(function(e,t){return[new Et.a(e,t)]}),[It.a,y.a]),o.Ab(4608,At.a,At.a,[Be.v,Me.a]),o.Ab(4608,Ct.a,Ct.a,[_t.a,y.a,Pt.a]),o.Ab(4608,Ve.x,Tt.a,[y.a,Ve.e]),o.Ab(4608,Ve.a,Ot.a,[]),o.Ab(4608,Dt.a,Dt.a,[]),o.Ab(5120,Ve.h,(function(){return[new xt.a,new Mt.a,new Nt.a]}),[]),o.Ab(4608,Ue.f,Ue.f,[o.A,Ue.e,o.C,[2,Ue.a],[2,Ue.c]]),o.Ab(4608,wt.a,kt.a,[]),o.Ab(5120,gn,(function(){return[new Jt]}),[]),o.Ab(4608,Jt,Jt,[]),o.Ab(5120,fn,(function(){return[new Ht,new Ut,new Bt]}),[]),o.Ab(4608,yn,Vt,[fn]),o.Ab(4608,Ft,Ft,[Pt.a,yn,y.a]),o.Ab(4608,Yt,Yt,[y.a,Pt.a,yn]),o.Ab(4608,qt,qt,[y.a,Pt.a,yn]),o.Ab(4608,Rt,Rt,[Pt.a]),o.Ab(4608,Xt,Xt,[Pt.a,yn]),o.Ab(4608,an,an,[]),o.Ab(4608,Zt,Zt,[yn]),o.Ab(4608,tn,tn,[Pt.a,yn]),o.Ab(5120,mn,(function(e){return[new cn(e)]}),[y.a]),o.Ab(5120,hn,(function(e,t,n){return[new on(e),new rn(t),new un(n)]}),[y.a,y.a,Gt.a]),o.Ab(5120,dn,(function(e,t,n,r,o,i,a,s,c,u,p,g,d,h,m,f,y,l,v,b){return[new jt(e,t,n,r),new Wt(o,i,a,s),new Kt(c,u),new nn(p,g),new $t(d,h),new Qt(m,f),new zt(y,l),new sn(v,b)]}),[Ft,Jt,Gt.a,mn,Yt,Jt,Gt.a,hn,qt,Jt,tn,Jt,Zt,Jt,Rt,Jt,Xt,Jt,an,Jt]),o.Ab(5120,De,(function(){return[new C]}),[]),o.Ab(4608,C,C,[]),o.Ab(4608,W,W,[Oe,k.a,ln.a,G.a,l.a]),o.Ab(4608,K,K,[W]),o.Ab(4608,I,I,[W,y.a]),o.Ab(4608,pe,pe,[G.a,W,l.a]),o.Ab(4608,ie,ie,[W]),o.Ab(4608,J,J,[Oe,k.a,ln.a,l.a]),o.Ab(4608,ye,ye,[W,y.a]),o.Ab(4608,te,te,[W]),o.Ab(4608,Ce,Ce,[k.a,ln.a,l.a]),o.Ab(4608,$,$,[]),o.Ab(4608,Ee,Ee,[W,y.a,l.a]),o.Ab(4608,se,se,[]),o.Ab(4608,Pe,Pe,[]),o.Ab(4608,Q,Q,[W,l.a]),o.Ab(4608,de,de,[W,l.a]),o.Ab(4608,re,re,[W,l.a]),o.Ab(4608,z,z,[l.a]),o.Ab(5120,xe,(function(e,t,n,r,o,i,a,s,c,u,p,g,d,h,m,f,y,l,v,b,S,E,I,A,C,_,T,O,D,x,M,N,w){return[new X(e,t),new le(n,r,o,i),new P(a,s),new ge(c,u),new ne(p,g),new ae(d,h),new _e(m,f),new ee(y,l),new Ie(v,b,S),new ce(E,I),new Te(A,C),new q(_,T),new he(O,D),new oe(x,M),new Z(N,w)]}),[K,C,ye,C,hn,l.a,I,C,pe,C,te,C,ie,C,Ce,C,$,C,Ee,C,l.a,se,C,Pe,C,Q,C,de,C,re,C,z,C]),o.Ab(4608,u,u,[]),o.Ab(1073742336,Re.c,Re.c,[]),o.Ab(1073742336,He.z,He.z,[]),o.Ab(1073742336,He.m,He.m,[]),o.Ab(1073742336,He.w,He.w,[]),o.Ab(1073742336,Ue.l,Ue.l,[]),o.Ab(1073742336,Ue.j,Ue.j,[]),o.Ab(1073742336,vn.a,vn.a,[]),o.Ab(1073742336,Be.c,Be.c,[]),o.Ab(1073742336,Be.g,Be.g,[]),o.Ab(1073742336,Be.h,Be.h,[]),o.Ab(1073742336,Be.l,Be.l,[]),o.Ab(1073742336,Be.m,Be.m,[]),o.Ab(1073742336,Be.s,Be.s,[]),o.Ab(1073742336,Be.t,Be.t,[]),o.Ab(1073742336,Be.x,Be.x,[]),o.Ab(1073742336,Be.B,Be.B,[]),o.Ab(1073742336,Be.G,Be.G,[]),o.Ab(1073742336,Be.J,Be.J,[]),o.Ab(1073742336,Be.M,Be.M,[]),o.Ab(1073742336,Be.P,Be.P,[]),o.Ab(1073742336,Be.T,Be.T,[]),o.Ab(1073742336,Be.W,Be.W,[]),o.Ab(1073742336,Be.X,Be.X,[]),o.Ab(1073742336,Be.y,Be.y,[]),o.Ab(1073742336,bn.a,bn.a,[]),o.Ab(1073742336,Sn.a,Sn.a,[]),o.Ab(1073742336,Ue.k,Ue.k,[]),o.Ab(1073742336,En.a,En.a,[]),o.Ab(1073742336,In,In,[]),o.Ab(1073742336,d,d,[]),o.Ab(256,Ue.b,En.b,[]),o.Ab(256,Ve.d,An.a,[]),o.Ab(256,tt.a,Cn.a,[]),o.Ab(256,Ue.e,En.c,[]),o.Ab(256,ln.a,_n.a,[]),o.Ab(256,pn,Lt,[]),o.Ab(1024,"components",(function(){return[g]}),[]),o.Ab(256,Oe,b,[])])}))},ulgn:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.PREMIUM="PREMIUM",e.PLUS="PLUS",e.ECONOMY="ECONOMY",e.EMERGENCY="EMERGENCY",e.FLATBED="FLATBED",e.BUSINESS="BUSINESS",e.BUSINESSCODESHARE="BUSINESSCODESHARE"}(r||(r={}))},vlDA:function(e,t,n){"use strict";var r=n("1hfv");n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}))}}]);